{"remainingRequest":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js!/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/manager/NicePay.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/manager/NicePay.vue","mtime":1735528661526},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js","mtime":1728542748260},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmRlbGV0ZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5oYXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBDcnlwdG9KUyBmcm9tICJjcnlwdG8tanMiOwppbXBvcnQgeyBjb21wdXRlZCwgb25Nb3VudGVkLCBvblVubW91bnRlZCwgcmVmIH0gZnJvbSAidnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ05pY2VQYXknLAogIHNldHVwKF9fcHJvcHMpIHsKICAgIGNvbnN0IGhhbmRsZVBvc3RNZXNzYWdlID0gZXZlbnQgPT4gewogICAgICAvLyDrgpjsnbTsiqTtjpjsnbTsl5DshJwg7KCE64us65CcIOuplOyLnOyngOyduOyngCDtmZXsnbgKICAgICAgaWYgKGV2ZW50Lm9yaWdpbiAhPT0gImh0dHBzOi8vd3d3Lm5pY2VwYXkuY28ua3IiKSByZXR1cm47IC8vIOuCmOydtOyKpO2OmOydtCDrj4TrqZTsnbjsnLzroZwg7ISk7KCVCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coIlJlY2VpdmVkIFBvc3QgTWVzc2FnZToiLCBkYXRhKTsKCiAgICAgICAgLy8g7JuQ7ZWY64qUIOqwkiDstpTstpwKICAgICAgICBjb25zdCB7CiAgICAgICAgICBjb2RlLAogICAgICAgICAgd2lkdGgsCiAgICAgICAgICBoZWlnaHQsCiAgICAgICAgICBzY3JvbGwKICAgICAgICB9ID0gZGF0YTsKICAgICAgICBjb25zb2xlLmxvZygiQ29kZToiLCBjb2RlKTsKICAgICAgICBjb25zb2xlLmxvZygiV2lkdGg6Iiwgd2lkdGgpOwogICAgICAgIGNvbnNvbGUubG9nKCJIZWlnaHQ6IiwgaGVpZ2h0KTsKICAgICAgICBjb25zb2xlLmxvZygiU2Nyb2xsOiIsIHNjcm9sbCk7CgogICAgICAgIC8vIO2VhOyalOyXkCDrlLDrnbwg7LaU6rCAIOyymOumrAogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkludmFsaWQgcG9zdE1lc3NhZ2UgZGF0YSIsIGVycm9yKTsKICAgICAgfQogICAgfTsKICAgIGZ1bmN0aW9uIGhhbmRsZVBvcHN0YXRlKCkgewogICAgICBjb25zb2xlLmxvZygi7J206rGwIO2DgOuCmOyalD8iKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoIi9tYW5hZ2VycG9pbnQtbWFuYWdlbWVudCIpOwogICAgfQoKICAgIC8vIOy/vOumrCDrp6TqsJzrs4DsiJgg7LaU7LacIO2VqOyImAogICAgZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbXMoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogcGFyYW1zLmdldCgnbmFtZScpLAogICAgICAgIHBob25lOiBwYXJhbXMuZ2V0KCdwaG9uZScpLAogICAgICAgIGVtYWlsOiBwYXJhbXMuZ2V0KCdlbWFpbCcpLAogICAgICAgIHByb2R1Y3Q6IHBhcmFtcy5nZXQoJ3Byb2R1Y3QnKSwKICAgICAgICBwcmljZTogcGFyYW1zLmdldCgncHJpY2UnKSwKICAgICAgICBwYXltZW50TWV0aG9kOiBwYXJhbXMuZ2V0KCdwYXltZW50TWV0aG9kJyksCiAgICAgICAgbWFuYWdlcklkOiBwYXJhbXMuZ2V0KCdtYW5hZ2VyaWQnKQogICAgICB9OwogICAgfQoKICAgIC8vIOuNsOydtO2EsCDqtIDrpqwKICAgIGNvbnN0IHF1ZXJ5RGF0YSA9IHJlZih7fSk7CiAgICBvbk1vdW50ZWQoYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnNvbGUubG9nKCfsu7Ttj6zrhIztirgg66eI7Jq07Yq4IOykkS4uLicpOwogICAgICAgIHdpbmRvdy5uaWNlcGF5U3VibWl0ID0gbmljZXBheVN1Ym1pdDsKICAgICAgICB3aW5kb3cubmljZXBheUNsb3NlID0gbmljZXBheUNsb3NlOwogICAgICAgIHF1ZXJ5RGF0YS52YWx1ZSA9IGdldFF1ZXJ5UGFyYW1zKCk7CiAgICAgICAgY29uc29sZS5sb2coJ+2ZleyduOyaqSAgOiA6IDogOicsIHF1ZXJ5RGF0YS52YWx1ZSk7CgogICAgICAgIC8vIEV4ZWN1dGUgZ29QYXkgYW5kIHRoZW4gaW5zZXJ0RGIKICAgICAgICBhd2FpdCBnb1BheShkb2N1bWVudC5wYXlGb3JtKTsKICAgICAgICBjb25zb2xlLmxvZygnZ29QYXkg7JmE66OMJyk7CiAgICAgICAgYXdhaXQgaW5zZXJ0RGIoKTsKICAgICAgICBjb25zb2xlLmxvZygnaW5zZXJ0RGIg7JmE66OMJyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign7Jik66WYIOuwnOyDnTonLCBlcnJvcik7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIG5pY2VwYXlTdWJtaXQg7ZWo7IiY66W8IHdpbmRvdyDqsJ3ssrTsl5Ag7ZWg64u57ZWY7JesIOyghOyXreyXkOyEnCDsoJHqt7wg6rCA64ql7ZWY6rKMIOunjOuTreuLiOuLpC4KICAgIGFzeW5jIGZ1bmN0aW9uIG5pY2VwYXlTdWJtaXQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCLtj7wg7KCc7LacIOyLnOyekSIpOwogICAgICBjb25zb2xlLmxvZygi7Y+8IOygnOy2nCDrqoXroLkg7Iuk7ZaJ65CoIik7CiAgICAgIGRvY3VtZW50LnBheUZvcm0uc3VibWl0KCk7CgogICAgICAvLyAvLyAzLiDqsrDqs7zqsJLsnYQg67Cb7JWY64uk6rOgIOqwgOygle2VmOqzoCBOaWNlUGF5Q29uZmlybeycvOuhnCDsnbTrj5kKICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiL05pY2VQYXlDb25maXJtIjsKICAgICAgLy8gY29uc29sZS5sb2coIuqysOKImuygnCDsmpTssq0g7J2R64u1OiIsIEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhKSk7CgogICAgICAvLyB0cnkgewogICAgICAvLyAgIGNvbnNvbGUubG9nKCLtj7wg7KCc7LacIOyLnOyekSIgLGhhc2hTdHJpbmcudmFsdWUpOwogICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKCLqsrDiiJrsoJwg7JqU7LKtIOydkeuLtToiLCBKU09OLnN0cmluZ2lmeShkb2N1bWVudC5wYXlGb3JtKSk7CiAgICAgIC8vICAgY29uc3QgZm9ybURhdGEgPSB7CiAgICAgIC8vICAgICBQYXlNZXRob2Q6IHBheW1lbnRNZXRob2QsCiAgICAgIC8vICAgICBHb29kc05hbWU6IGdvb2RzTmFtZSwKICAgICAgLy8gICAgIEFtdDogYW10LAogICAgICAvLyAgICAgTUlEOiBNSUQsCiAgICAgIC8vICAgICBNb2lkOiBtb2lkLAogICAgICAvLyAgICAgQnV5ZXJOYW1lOiBidXllck5hbWUsCiAgICAgIC8vICAgICBCdXllckVtYWlsOiBidXllckVtYWlsLAogICAgICAvLyAgICAgQnV5ZXJUZWw6IGJ1eWVyVGVsLAogICAgICAvLyAgICAgUmV0dXJuVVJMOiAiaHR0cDovLzEzLjEyNC42Mi42ODozMDAwL2FwaS9wb2ludHMvYXV0aFJlcSIsCiAgICAgIC8vICAgICBFZGlEYXRlOiBlZGlEYXRlLAogICAgICAvLyAgICAgU2lnbkRhdGE6IGhhc2hTdHJpbmcudmFsdWUsCiAgICAgIC8vICAgICBOcExhbmc6ICJLTyIsIC8vIOqzoOyglSDqsJIKICAgICAgLy8gICAgIEdvb2RzQ2w6ICIxIiwgLy8g6rOg7KCVIOqwkgogICAgICAvLyAgICAgVHJhbnNUeXBlOiAiMCIsIC8vIOqzoOyglSDqsJIKICAgICAgLy8gICAgIENoYXJTZXQ6ICJ1dGYtOCIsIC8vIOqzoOyglSDqsJIKICAgICAgLy8gICAgIFJlcVJlc2VydmVkOiAiIiwgLy8g6rOg7KCVIOqwkgogICAgICAvLyAgIH07CgogICAgICAvLyAgIC8vIO2PvCDrjbDsnbTthLAg6rCA7KC47Jik6riwCiAgICAgIC8vICAgLy8gY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZG9jdW1lbnQucGF5Rm9ybSk7CgogICAgICAvLyAgIGNvbnN0IGEgPSAgewogICAgICAvLyAgICAgICAiQWNjZXB0LUNoYXJzZXQiOiAiZXVjLWtyIiwgLy8gZXVjLWtyIOyEpOyglQogICAgICAvLyAgICAgfTsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCLqsrDiiJrsoJwg7JqU7LKtIOydkeuLtToiLCBKU09OLnN0cmluZ2lmeShmb3JtRGF0YSkpOwoKICAgICAgLy8gICAvLyAxLiDtj7wg7KCc7LacICjsl6zquLDshJzripQg7ISc67KE66GcIOyghOyGoe2VnOuLpOqzoCDqsIDsoJUpCiAgICAgIC8vICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCJodHRwOi8vMTMuMTI0LjYyLjY4OjMwMDAvYXBpL3BvaW50cy9hdXRoUmVxIiwgZm9ybURhdGEsYSk7CiAgICAgIC8vICAgY29uc29sZS5sb2coIuqysOKImuygnCDsmpTssq0g7J2R64u1OiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgLy8gICAvLyAyLiDsnZHri7Ug6rKw6rO8IOyymOumrAogICAgICAvLyAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgLy8gICAgIC8vIOqysOygnCDshLHqs7Ug7ZuEIE5pY2VQYXlDb25maXJt7Jy866GcIOydtOuPmQogICAgICAvLyAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiL05pY2VQYXlDb25maXJtIjsKICAgICAgLy8gICB9IGVsc2UgewogICAgICAvLyAgICAgLy8g7Iuk7YyoIOyymOumrAogICAgICAvLyAgICAgYWxlcnQoIuqysOygnOyXkCDsi6TtjKjtlojsirXri4jri6QuIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuIik7CiAgICAgIC8vICAgfQogICAgICAvLyB9IGNhdGNoIChlcnJvcikgewogICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoIuqysOygnCDsmpTssq0g7KSRIOyYpOulmCDrsJzsg506IiwgZXJyb3IpOwogICAgICAvLyAgIGFsZXJ0KCLqsrDsoJwg7JqU7LKtIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiIpOwogICAgICAvLyB9CiAgICB9CiAgICBmdW5jdGlvbiBuaWNlcGF5Q2xvc2UoKSB7CiAgICAgIGFsZXJ0KCLqsrDsoJzqsIAg7Leo7IaMIOuQmOyXiOyKteuLiOuLpCIpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL21hbmFnZXJwb2ludC1tYW5hZ2VtZW50Jyk7CiAgICB9CiAgICBvblVubW91bnRlZCgoKSA9PiB7CiAgICAgIC8vIOy7tO2PrOuEjO2KuOqwgCDslrjrp4jsmrTtirjrkKAg65WMIHdpbmRvdyDqsJ3ssrTsl5DshJwgbmljZXBheVN1Ym1pdCDtlajsiJjrpbwg7KCc6rGw7ZWp64uI64ukLgogICAgICBjb25zb2xlLmxvZygnb25Vbm1vdW50ZWQg66eI7Jq07Yq4IOykkS4uLicpOwogICAgICBkZWxldGUgd2luZG93Lm5pY2VwYXlTdWJtaXQ7CiAgICAgIGRlbGV0ZSB3aW5kb3cubmljZXBheUNsb3NlOwogICAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicG9wc3RhdGUiLCBoYW5kbGVQb3BzdGF0ZSk7CiAgICB9KTsKICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBnZXRRdWVyeVBhcmFtcygpLnBheW1lbnRNZXRob2Q7CiAgICBjb25zdCBtYW5hZ2VySWQgPSBnZXRRdWVyeVBhcmFtcygpLm1hbmFnZXJJZDsKICAgIGNvbnN0IG1vaWRfcmFuZG9tID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1stOi5UWl0vZywgIiIpOwogICAgY29uc3QgbWVyY2hhbnRLZXkgPSAiMzNGNDlHbkNNUzFtRllsR1hpc2JVRHpWZjJBVFdDbDlrM1IrK2Q1aERkM0ZybXVvcy9YTHg4WGhYcGUrTERZQWJwR0taWVN3dGx5eUxPdFMvOGFEN0E9PSI7CiAgICBjb25zdCBNSUQgPSAibmljdGVzdDAwbSI7CiAgICBjb25zdCBlZGlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1stOi5UWl0vZywgIiIpLnNsaWNlKDAsIDE0KTsKICAgIGNvbnN0IGFtdCA9IGdldFF1ZXJ5UGFyYW1zKCkucHJpY2U7CiAgICBjb25zdCByZXR1cm5VUkwgPSAiaHR0cHM6Ly8xMy4xMjQuNjIuNjg6MzAwMC9hcGkvcG9pbnRzL2F1dGhSZXEiOwogICAgY29uc3QgZ29vZHNOYW1lID0gZ2V0UXVlcnlQYXJhbXMoKS5wcm9kdWN0OwogICAgY29uc3QgbW9pZCA9ICJtb2lkIiArIG1vaWRfcmFuZG9tOwogICAgY29uc3QgYnV5ZXJOYW1lID0gZ2V0UXVlcnlQYXJhbXMoKS5uYW1lOwogICAgY29uc3QgYnV5ZXJFbWFpbCA9IGdldFF1ZXJ5UGFyYW1zKCkuZW1haWw7CiAgICBjb25zdCBidXllclRlbCA9IGdldFF1ZXJ5UGFyYW1zKCkucGhvbmUucmVwbGFjZSgvLS9nLCAnJyk7CiAgICBjb25zdCBjb3VudCA9IHJlZigwKTsKICAgIGNvbnN0IGhhc2hTdHJpbmcgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIGNvbnN0IHN0ciA9IGAke2VkaURhdGV9JHtNSUR9JHthbXR9JHttZXJjaGFudEtleX1gOwogICAgICByZXR1cm4gQ3J5cHRvSlMuU0hBMjU2KHN0cikudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLkhleCk7CiAgICB9KTsKICAgIGFzeW5jIGZ1bmN0aW9uIG5pY2VwYXlTdGFydChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBnb1BheShkb2N1bWVudC5wYXlGb3JtKTsKICAgIH0KICAgIGFzeW5jIGZ1bmN0aW9uIGluc2VydERiKCkgewogICAgICBjb25zb2xlLmxvZygnbW9pZCA6IDogOiAnLCBtb2lkLCBwYXltZW50TWV0aG9kLCBnb29kc05hbWUsIGFtdCwgbWFuYWdlcklkKTsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICJtYW5hZ2VyaWQiOiBwYXJzZUludChtYW5hZ2VySWQpLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICLtj6zsnbjtirgg7Lap7KCEIOy3qOyGjCIsCiAgICAgICAgImFtb3VudCI6IHBhcnNlSW50KGFtdCksCiAgICAgICAgInRpZCI6ICIiLAogICAgICAgICJnb29kc25hbWUiOiBnb29kc05hbWUsCiAgICAgICAgIm1vaWQiOiBtb2lkLAogICAgICAgICJwYXltZXRob2QiOiBwYXltZW50TWV0aG9kCiAgICAgIH07CiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgJ2FjY2VwdCc6ICcqLyonCiAgICAgICAgfQogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgiaHR0cHM6Ly8xMy4xMjQuNjIuNjg6MzAwMC9hcGkvcG9pbnRzIiwgcGFyYW1zLCBjb25maWcpOwogICAgICAgIGNvbnNvbGUubG9nKCJ0ZXN0IGdldCAg7JqU7LKtIiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi6rKw7KCcIOyalOyyrSDsi6TtjKg6IiwgZXJyb3IpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICBfX3NmYzogdHJ1ZSwKICAgICAgaGFuZGxlUG9zdE1lc3NhZ2UsCiAgICAgIGhhbmRsZVBvcHN0YXRlLAogICAgICBnZXRRdWVyeVBhcmFtcywKICAgICAgcXVlcnlEYXRhLAogICAgICBuaWNlcGF5U3VibWl0LAogICAgICBuaWNlcGF5Q2xvc2UsCiAgICAgIHBheW1lbnRNZXRob2QsCiAgICAgIG1hbmFnZXJJZCwKICAgICAgbW9pZF9yYW5kb20sCiAgICAgIG1lcmNoYW50S2V5LAogICAgICBNSUQsCiAgICAgIGVkaURhdGUsCiAgICAgIGFtdCwKICAgICAgcmV0dXJuVVJMLAogICAgICBnb29kc05hbWUsCiAgICAgIG1vaWQsCiAgICAgIGJ1eWVyTmFtZSwKICAgICAgYnV5ZXJFbWFpbCwKICAgICAgYnV5ZXJUZWwsCiAgICAgIGNvdW50LAogICAgICBoYXNoU3RyaW5nLAogICAgICBuaWNlcGF5U3RhcnQsCiAgICAgIGluc2VydERiCiAgICB9OwogIH0KfTs="},{"version":3,"names":["axios","CryptoJS","computed","onMounted","onUnmounted","ref","handlePostMessage","event","origin","data","JSON","parse","console","log","code","width","height","scroll","error","handlePopstate","window","location","replace","getQueryParams","params","URLSearchParams","search","name","get","phone","email","product","price","paymentMethod","managerId","queryData","nicepaySubmit","nicepayClose","value","goPay","document","payForm","insertDb","submit","alert","moid_random","Date","toISOString","merchantKey","MID","ediDate","slice","amt","returnURL","goodsName","moid","buyerName","buyerEmail","buyerTel","count","hashString","str","SHA256","toString","enc","Hex","nicepayStart","preventDefault","parseInt","config","headers","response","post"],"sources":["NicePay.vue"],"sourcesContent":["<script setup>\nimport axios from \"axios\";\nimport CryptoJS from \"crypto-js\";\nimport { computed, onMounted, onUnmounted, ref } from \"vue\";\n\n\nconst handlePostMessage = (event) => {\n  // 나이스페이에서 전달된 메시지인지 확인\n  if (event.origin !== \"https://www.nicepay.co.kr\") return; // 나이스페이 도메인으로 설정\n  try {\n    const data = JSON.parse(event.data);\n    console.log(\"Received Post Message:\", data);\n\n    // 원하는 값 추출\n    const { code, width, height, scroll } = data;\n    console.log(\"Code:\", code);\n    console.log(\"Width:\", width);\n    console.log(\"Height:\", height);\n    console.log(\"Scroll:\", scroll);\n\n    // 필요에 따라 추가 처리\n  } catch (error) {\n    console.error(\"Invalid postMessage data\", error);\n  }\n};\nfunction handlePopstate() {\n  console.log(\"이거 타나요?\")\n  window.location.replace(\"/managerpoint-management\");\n\n}\n\n// 쿼리 매개변수 추출 함수\nfunction getQueryParams() {\n  const params = new URLSearchParams(window.location.search);\n  return {\n    name: params.get('name'),\n    phone: params.get('phone'),\n    email: params.get('email'),\n    product: params.get('product'),\n    price: params.get('price'),\n    paymentMethod: params.get('paymentMethod'),\n    managerId: params.get('managerid'),\n  };\n}\n\n// 데이터 관리\nconst queryData = ref({});\n\nonMounted(async () => {\n  try {\n    console.log('컴포넌트 마운트 중...');\n    window.nicepaySubmit = nicepaySubmit;\n    window.nicepayClose = nicepayClose;\n    queryData.value = getQueryParams();\n    console.log('확인용  : : : :', queryData.value);\n\n    // Execute goPay and then insertDb\n    await goPay(document.payForm);\n    console.log('goPay 완료');\n\n    await insertDb();\n    console.log('insertDb 완료');\n  } catch (error) {\n    console.error('오류 발생:', error);\n  }\n});\n\n// nicepaySubmit 함수를 window 객체에 할당하여 전역에서 접근 가능하게 만듭니다.\nasync function nicepaySubmit() {\n \n  console.log(\"폼 제출 시작\");\n  console.log(\"폼 제출 명령 실행됨\");\n  document.payForm.submit();\n \n\n  // // 3. 결과값을 받았다고 가정하고 NicePayConfirm으로 이동\n  // window.location.href = \"/NicePayConfirm\";\n  // console.log(\"결√제 요청 응답:\", JSON.stringify(formData));\n\n  // try {\n  //   console.log(\"폼 제출 시작\" ,hashString.value);\n  //   // console.log(\"결√제 요청 응답:\", JSON.stringify(document.payForm));\n  //   const formData = {\n  //     PayMethod: paymentMethod,\n  //     GoodsName: goodsName,\n  //     Amt: amt,\n  //     MID: MID,\n  //     Moid: moid,\n  //     BuyerName: buyerName,\n  //     BuyerEmail: buyerEmail,\n  //     BuyerTel: buyerTel,\n  //     ReturnURL: \"http://13.124.62.68:3000/api/points/authReq\",\n  //     EdiDate: ediDate,\n  //     SignData: hashString.value,\n  //     NpLang: \"KO\", // 고정 값\n  //     GoodsCl: \"1\", // 고정 값\n  //     TransType: \"0\", // 고정 값\n  //     CharSet: \"utf-8\", // 고정 값\n  //     ReqReserved: \"\", // 고정 값\n  //   };\n    \n  //   // 폼 데이터 가져오기\n  //   // const formData = new FormData(document.payForm);\n    \n  //   const a =  {\n  //       \"Accept-Charset\": \"euc-kr\", // euc-kr 설정\n  //     };\n  //     console.log(\"결√제 요청 응답:\", JSON.stringify(formData));\n\n  //   // 1. 폼 제출 (여기서는 서버로 전송한다고 가정)\n  //   const response = await axios.post(\"http://13.124.62.68:3000/api/points/authReq\", formData,a);\n  //   console.log(\"결√제 요청 응답:\", response.data);\n\n  //   // 2. 응답 결과 처리\n  //   if (response.data.success) {\n  //     // 결제 성공 후 NicePayConfirm으로 이동\n  //     window.location.href = \"/NicePayConfirm\";\n  //   } else {\n  //     // 실패 처리\n  //     alert(\"결제에 실패했습니다. 다시 시도해주세요.\");\n  //   }\n  // } catch (error) {\n  //   console.error(\"결제 요청 중 오류 발생:\", error);\n  //   alert(\"결제 요청 중 오류가 발생했습니다.\");\n  // }\n}\n\nfunction nicepayClose() {\n  alert(\"결제가 취소 되었습니다\");\n  window.location.replace('/managerpoint-management');\n}\n\n\nonUnmounted(() => {\n  // 컴포넌트가 언마운트될 때 window 객체에서 nicepaySubmit 함수를 제거합니다.\n  console.log('onUnmounted 마운트 중...');\n\n  delete window.nicepaySubmit;\n  delete window.nicepayClose;\n  // window.addEventListener(\"popstate\", handlePopstate);\n\n});\n\n\nconst paymentMethod = getQueryParams().paymentMethod;\nconst managerId = getQueryParams().managerId;\nconst moid_random = new Date().toISOString().replace(/[-:.TZ]/g, \"\")\nconst merchantKey =\n  \"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A==\";\nconst MID = \"nictest00m\";\nconst ediDate = new Date().toISOString().replace(/[-:.TZ]/g, \"\").slice(0, 14);\nconst amt = getQueryParams().price;\nconst returnURL = \"https://13.124.62.68:3000/api/points/authReq\";\nconst goodsName = getQueryParams().product;\nconst moid = \"moid\"+ moid_random;\nconst buyerName = getQueryParams().name;\nconst buyerEmail = getQueryParams().email;\nconst buyerTel = getQueryParams().phone.replace(/-/g, '');\n\nconst count = ref(0);\n\nconst hashString = computed(() => {\n  const str = `${ediDate}${MID}${amt}${merchantKey}`;\n  return CryptoJS.SHA256(str).toString(CryptoJS.enc.Hex);\n});\n\nasync function nicepayStart(event) {\n  \n  event.preventDefault();\n  goPay(document.payForm);\n\n  \n\n}\n\nasync function insertDb() {\n\n  console.log('moid : : : ' , moid ,paymentMethod , goodsName ,amt ,managerId)\n  const params = {\n  \"managerid\": parseInt(managerId),\n  \"description\": \"포인트 충전 취소\",\n  \"amount\": parseInt(amt),\n  \"tid\": \"\",\n  \"goodsname\": goodsName,\n  \"moid\": moid,\n  \"paymethod\": paymentMethod\n}\n\n  const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'accept': '*/*',\n        },\n      };\n\n  try {\n    const response = await axios.post(\"https://13.124.62.68:3000/api/points\",\n      params,config\n    );\n    console.log(\"test get  요청\", response.data);\n  } catch (error) {\n    console.error(\"결제 요청 실패:\", error);\n  }\n}\n</script>\n\n<template>\n  <body style=\"display: none\">\n    \n    <form\n      name=\"payForm\"\n      method=\"post\"\n      action=\"https://13.124.62.68:3000/api/points/authReq\"\n      accept-charset=\"euc-kr\"\n      class=\"payment-form\"\n    >\n\n    <!-- <form name=\"payForm\" @submit.prevent=\"nicepaySubmit\" class=\"payment-form\"> -->\n\n      <table>\n        <tr>\n          <th>PayMethod</th>\n          <td><input type=\"text\" name=\"PayMethod\" v-model=\"paymentMethod\" /></td>\n        </tr>\n        <tr>\n          <th>GoodsName</th>\n          <td><input type=\"text\" name=\"GoodsName\" v-model=\"goodsName\" /></td>\n        </tr>\n        <tr>\n          <th>Amt</th>\n          <td><input type=\"text\" name=\"Amt\" v-model=\"amt\" /></td>\n        </tr>\n        <tr>\n          <th>MID</th>\n          <td><input type=\"text\" name=\"MID\" v-model=\"MID\" /></td>\n        </tr>\n        <tr>\n          <th>Moid</th>\n          <td><input type=\"text\" name=\"Moid\" v-model=\"moid\" /></td>\n        </tr>\n        <tr>\n          <th>BuyerName</th>\n          <td><input type=\"text\" name=\"BuyerName\" v-model=\"buyerName\" /></td>\n        </tr>\n        <tr>\n          <th>BuyerEmail</th>\n          <td>\n            <input type=\"text\" name=\"BuyerEmail\" v-model=\"buyerEmail\" />\n          </td>\n        </tr>\n        <tr>\n          <th>BuyerTel</th>\n          <td><input type=\"text\" name=\"BuyerTel\" v-model=\"buyerTel\" /></td>\n        </tr>\n        <tr>\n          <th>ReturnURL [Mobile only]</th>\n          <td><input type=\"text\" name=\"ReturnURL\" v-model=\"returnURL\" /></td>\n        </tr>\n        <tr>\n          <th>Virtual Account Expiration Date(YYYYMMDD)</th>\n          <td><input type=\"text\" name=\"VbankExpDate\" value=\"\" /></td>\n        </tr>\n\n        <input type=\"hidden\" name=\"NpLang\" value=\"KO\" />\n        <!-- EN:English, CN:Chinese, KO:Korean -->\n        <input type=\"hidden\" name=\"GoodsCl\" value=\"1\" />\n        <!-- products(1), contents(0)) -->\n        <input type=\"hidden\" name=\"TransType\" value=\"0\" />\n        <!-- USE escrow false(0)/true(1) -->\n        <input type=\"hidden\" name=\"CharSet\" value=\"utf-8\" />\n        <!-- Return CharSet -->\n        <input type=\"hidden\" name=\"ReqReserved\" value=\"\" />\n        <!-- mall custom field -->\n\n        <!-- DO NOT CHANGE -->\n        <input type=\"hidden\" name=\"EdiDate\" v-model=\"ediDate\" />\n        <!-- YYYYMMDDHHMISS -->\n        <input type=\"hidden\" name=\"SignData\" v-model=\"hashString\" />\n        <!-- EncryptData -->\n      </table>\n      <div class=\"button-group\">\n        <a href=\"#\" class=\"btn_blue\" @click=\"nicepayStart\">REQUEST</a>\n        <!-- <a href=\"#\" class=\"btn_blue\" @click=\"test\">test</a> -->\n      </div>\n    </form>\n  </body>\n</template>\n \n<style scoped>\n.payment-form {\n  max-width: 600px;\n  margin: 20px auto;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background-color: #f9f9f9;\n}\n\n.payment-form table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\n\n.payment-form th {\n  text-align: left;\n  padding: 8px;\n  background-color: #f2f2f2;\n  border-bottom: 1px solid #ddd;\n}\n\n.payment-form td {\n  padding: 8px;\n  border-bottom: 1px solid #ddd;\n}\n\n.payment-form input[type=\"text\"] {\n  width: calc(100% - 16px);\n  padding: 6px 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.button-group {\n  display: flex;\n  justify-content: space-between;\n}\n\n.btn_blue {\n  display: inline-block;\n  padding: 10px 20px;\n  color: #fff;\n  background-color: #007bff;\n  text-decoration: none;\n  border-radius: 4px;\n  text-align: center;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.btn_blue:hover {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":";;;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAASC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,GAAG,QAAQ,KAAK;;;;IAG3D,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;MACnC;MACA,IAAIA,KAAK,CAACC,MAAM,KAAK,2BAA2B,EAAE,OAAO,CAAC;MAC1D,IAAI;QACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,KAAK,CAACE,IAAI,CAAC;QACnCG,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEJ,IAAI,CAAC;;QAE3C;QACA,MAAM;UAAEK,IAAI;UAAEC,KAAK;UAAEC,MAAM;UAAEC;QAAO,CAAC,GAAGR,IAAI;QAC5CG,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,IAAI,CAAC;QAC1BF,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEE,KAAK,CAAC;QAC5BH,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEG,MAAM,CAAC;QAC9BJ,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEI,MAAM,CAAC;;QAE9B;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;IACF,CAAC;IACD,SAASC,cAAcA,CAAA,EAAG;MACxBP,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBO,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,0BAA0B,CAAC;IAErD;;IAEA;IACA,SAASC,cAAcA,CAAA,EAAG;MACxB,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACL,MAAM,CAACC,QAAQ,CAACK,MAAM,CAAC;MAC1D,OAAO;QACLC,IAAI,EAAEH,MAAM,CAACI,GAAG,CAAC,MAAM,CAAC;QACxBC,KAAK,EAAEL,MAAM,CAACI,GAAG,CAAC,OAAO,CAAC;QAC1BE,KAAK,EAAEN,MAAM,CAACI,GAAG,CAAC,OAAO,CAAC;QAC1BG,OAAO,EAAEP,MAAM,CAACI,GAAG,CAAC,SAAS,CAAC;QAC9BI,KAAK,EAAER,MAAM,CAACI,GAAG,CAAC,OAAO,CAAC;QAC1BK,aAAa,EAAET,MAAM,CAACI,GAAG,CAAC,eAAe,CAAC;QAC1CM,SAAS,EAAEV,MAAM,CAACI,GAAG,CAAC,WAAW;MACnC,CAAC;IACH;;IAEA;IACA,MAAMO,SAAS,GAAG9B,GAAG,CAAC,CAAC,CAAC,CAAC;IAEzBF,SAAS,CAAC,YAAY;MACpB,IAAI;QACFS,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;QAC5BO,MAAM,CAACgB,aAAa,GAAGA,aAAa;QACpChB,MAAM,CAACiB,YAAY,GAAGA,YAAY;QAClCF,SAAS,CAACG,KAAK,GAAGf,cAAc,CAAC,CAAC;QAClCX,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEsB,SAAS,CAACG,KAAK,CAAC;;QAE5C;QACA,MAAMC,KAAK,CAACC,QAAQ,CAACC,OAAO,CAAC;QAC7B7B,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;QAEvB,MAAM6B,QAAQ,CAAC,CAAC;QAChB9B,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC5B,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;MAChC;IACF,CAAC,CAAC;;IAEF;IACA,eAAekB,aAAaA,CAAA,EAAG;MAE7BxB,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBD,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B2B,QAAQ,CAACC,OAAO,CAACE,MAAM,CAAC,CAAC;;MAGzB;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACF;IAEA,SAASN,YAAYA,CAAA,EAAG;MACtBO,KAAK,CAAC,cAAc,CAAC;MACrBxB,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,0BAA0B,CAAC;IACrD;IAGAlB,WAAW,CAAC,MAAM;MAChB;MACAQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MAEnC,OAAOO,MAAM,CAACgB,aAAa;MAC3B,OAAOhB,MAAM,CAACiB,YAAY;MAC1B;IAEF,CAAC,CAAC;IAGF,MAAMJ,aAAa,GAAGV,cAAc,CAAC,CAAC,CAACU,aAAa;IACpD,MAAMC,SAAS,GAAGX,cAAc,CAAC,CAAC,CAACW,SAAS;IAC5C,MAAMW,WAAW,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACzB,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;IACpE,MAAM0B,WAAW,GACf,0FAA0F;IAC5F,MAAMC,GAAG,GAAG,YAAY;IACxB,MAAMC,OAAO,GAAG,IAAIJ,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACzB,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC6B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IAC7E,MAAMC,GAAG,GAAG7B,cAAc,CAAC,CAAC,CAACS,KAAK;IAClC,MAAMqB,SAAS,GAAG,8CAA8C;IAChE,MAAMC,SAAS,GAAG/B,cAAc,CAAC,CAAC,CAACQ,OAAO;IAC1C,MAAMwB,IAAI,GAAG,MAAM,GAAEV,WAAW;IAChC,MAAMW,SAAS,GAAGjC,cAAc,CAAC,CAAC,CAACI,IAAI;IACvC,MAAM8B,UAAU,GAAGlC,cAAc,CAAC,CAAC,CAACO,KAAK;IACzC,MAAM4B,QAAQ,GAAGnC,cAAc,CAAC,CAAC,CAACM,KAAK,CAACP,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;IAEzD,MAAMqC,KAAK,GAAGtD,GAAG,CAAC,CAAC,CAAC;IAEpB,MAAMuD,UAAU,GAAG1D,QAAQ,CAAC,MAAM;MAChC,MAAM2D,GAAG,GAAG,GAAGX,OAAO,GAAGD,GAAG,GAAGG,GAAG,GAAGJ,WAAW,EAAE;MAClD,OAAO/C,QAAQ,CAAC6D,MAAM,CAACD,GAAG,CAAC,CAACE,QAAQ,CAAC9D,QAAQ,CAAC+D,GAAG,CAACC,GAAG,CAAC;IACxD,CAAC,CAAC;IAEF,eAAeC,YAAYA,CAAC3D,KAAK,EAAE;MAEjCA,KAAK,CAAC4D,cAAc,CAAC,CAAC;MACtB5B,KAAK,CAACC,QAAQ,CAACC,OAAO,CAAC;IAIzB;IAEA,eAAeC,QAAQA,CAAA,EAAG;MAExB9B,OAAO,CAACC,GAAG,CAAC,aAAa,EAAG0C,IAAI,EAAEtB,aAAa,EAAGqB,SAAS,EAAEF,GAAG,EAAElB,SAAS,CAAC;MAC5E,MAAMV,MAAM,GAAG;QACf,WAAW,EAAE4C,QAAQ,CAAClC,SAAS,CAAC;QAChC,aAAa,EAAE,WAAW;QAC1B,QAAQ,EAAEkC,QAAQ,CAAChB,GAAG,CAAC;QACvB,KAAK,EAAE,EAAE;QACT,WAAW,EAAEE,SAAS;QACtB,MAAM,EAAEC,IAAI;QACZ,WAAW,EAAEtB;MACf,CAAC;MAEC,MAAMoC,MAAM,GAAG;QACTC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,QAAQ,EAAE;QACZ;MACF,CAAC;MAEL,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMvE,KAAK,CAACwE,IAAI,CAAC,sCAAsC,EACtEhD,MAAM,EAAC6C,MACT,CAAC;QACDzD,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE0D,QAAQ,CAAC9D,IAAI,CAAC;MAC5C,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACnC;IACF","ignoreList":[]}]}