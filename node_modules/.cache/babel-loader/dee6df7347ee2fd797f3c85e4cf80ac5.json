{"remainingRequest":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js!/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/ReservationCancelModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/ReservationCancelModal.vue","mtime":1733968697055},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js","mtime":1728542748260},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdGFza1N0b3JlIH0gZnJvbSAiQC9zdG9yZS90YXNrU3RvcmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlc2VydmF0aW9uQ2FuY2VsTW9kYWwiLAogIHByb3BzOiB7CiAgICByZXNlcnZhdGlvbklkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBzdG9yZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdGltZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbG9naW5JbmZvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIC8vIG1vdW50ZWQoKSB7CiAgLy8gICBjb25zb2xlLmxvZygi67Cb7J2AIHJlc2VydmF0aW9uSWQgKG1vdW50ZWQpOiIsIHRoaXMucmVzZXJ2YXRpb25JZCk7CiAgLy8gfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZVJNb2RhbCgpIHsKICAgICAgLy8g66qo64us7J2EIOuLq+q4sCDsnITtlZwg7J2067Kk7Yq4IOyghOyGoQogICAgICB0aGlzLiRlbWl0KCJjbG9zZVJNb2RhbCIpOwogICAgfSwKICAgIGFzeW5jIGNhbmNlbFJlc2VydmF0aW9uKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHN0YXR1czogImNhbmNlbCIgLy8g7ISc67KE7JeQIOyggOyepe2VoCDtlYTrk5zrqoUgJ3Byb2ZpbGVJbWFnZSfroZwg7KCE7IahCiAgICAgICAgfTsKICAgICAgICAvLyDshJzrsoTsl5Ag7ZSE66Gc7ZWEIOydtOuvuOyngCDsl4XrjbDsnbTtirgg7JqU7LKtCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0YXNrU3RvcmUudXBkYXRlVGFzayhgcmVzZXJ2YXRpb25zLyR7dGhpcy5yZXNlcnZhdGlvbklkfS9zdGF0dXNgLCBwYXJhbXMpOwogICAgICAgIGNvbnNvbGUubG9nKCJkc2ZoZGZzamtsO2RzZiIsIHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coIuyYiOyVvSDst6jshowg7J2R64u1OiIsIHJlc3BvbnNlKTsKICAgICAgICBhbGVydCgi7JiI7JW97J20IOy3qOyGjOuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgICB0aGlzLmNhbmNlbE1zZygpOyAvLyDsmIjslb0g7Leo7IaMIOuplOyEuOyngCDsoITshqEKCiAgICAgICAgLy8g7ISx6rO17KCB7Jy866GcIOy3qOyGjCDtm4Qg66qo64usIOuLq+q4sAogICAgICAgIHRoaXMuJGVtaXQoImNsb3NlUk1vZGFsIik7CiAgICAgICAgdGhpcy4kZW1pdCgicmVzZXJ2YXRpb25DYW5jZWxlZCIpOyAvLyDsg4HsnIQg7Lu07Y+s64SM7Yq47JeQIOydtOuypO2KuCDsoITri6wKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCLsmIjslb0g7Leo7IaMIOyLpO2MqDoiLCBlcnJvcik7CiAgICAgICAgYWxlcnQoIuyYiOyVvSDst6jshozsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLiDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULiIpOwogICAgICB9CiAgICB9LAogICAgLy8g7JiI7JW9IOy3qOyGjCDrqZTshLjsp4Ag7KCE7IahCiAgICBhc3luYyBjYW5jZWxNc2coKSB7CiAgICAgIGNvbnN0IGF2YWlsYWJsZVRpbWUgPSB0aGlzLnRpbWUuc3BsaXQoIlsiKVswXS50cmltKCk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAvLyDtlbTri7kg7YyM652866+47YSwIOqwkiDssYTsm4wg64Sj6riwIQogICAgICAgIHBob25lTnVtYmVyOiB0aGlzLmxvZ2luSW5mby5waG9uZU5tLAogICAgICAgIC8vIGxvZ2luSW5mb+yXkOyEnCBwaG9uZU5tIOyCrOyaqQogICAgICAgIHVzZXJOYW1lOiB0aGlzLmxvZ2luSW5mby5uYW1lLAogICAgICAgIGF2YWlsYWJsZVRpbWUsCiAgICAgICAgLy8g7JiI7JW9IOyLnOyekSDsi5zqsITqs7wg7KKF66OMIOyLnOqwhAogICAgICAgIHN0b3JlTmFtZTogdGhpcy5zdG9yZQogICAgICB9OwogICAgICBjb25zb2xlLmxvZygiZGtsaiIsIHBhcmFtcyk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0YXNrU3RvcmUucG9zdFRhc2soYHYxL3Ntcy9jYW5jZWxSZXNlcnZhdGlvbmAsIHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlIiwgcmVzcG9uc2UpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkFQSSDtmLjstpwg7Jik66WYOiIsIGVycm9yKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["taskStore","name","props","reservationId","type","Number","required","store","String","time","loginInfo","Object","methods","closeRModal","$emit","cancelReservation","params","status","response","updateTask","console","log","alert","cancelMsg","error","availableTime","split","trim","phoneNumber","phoneNm","userName","storeName","postTask"],"sources":["src/components/ReservationCancelModal.vue"],"sourcesContent":["<template>\n  <div class=\"popupu47defualt-3 screen\">\n    <div class=\"frame-5-3\">\n      <div class=\"frame-4-3\">\n        <div class=\"x-45 valign-text-middle notosanskr-medium-log-cabin-16px\">\n          예약 취소\n        </div>\n        <!-- 24.12.12 수정 - 폰트 수정, 문구 수정 -->\n        <p class=\"text_label-33 valign-text-middle pretendard-regular-normal-granite-gray-14px\">\n          예약을 취소하시겠습니까?\n        </p>\n      </div>\n      <div class=\"btn-group-3\">\n        <!-- 24.12.12 수정 - div - button 변경 -->\n        <button class=\"btnsecondary notosanskr-light-white-16px\" @click=\"closeRModal\">\n            닫기\n        </button>\n        <button class=\"btnprimary-3 notosanskr-light-white-16px\" @click=\"cancelReservation\">\n            취소\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { taskStore } from \"@/store/taskStore\"; \n\nexport default {\n  name: \"ReservationCancelModal\",\n  props: {\n    reservationId: {\n      type: Number,\n      required: true,\n    },\n    store: {\n    type: String,\n    required: true,\n  },\n  time: {\n    type: String,\n    required: true,\n  },\n  loginInfo: {\n    type: Object,\n    required: true,\n  },\n  },\n  // mounted() {\n  //   console.log(\"받은 reservationId (mounted):\", this.reservationId);\n  // },\n  methods: {\n    closeRModal() {\n      // 모달을 닫기 위한 이벤트 전송\n      this.$emit(\"closeRModal\");\n    },\n    async cancelReservation() {\n      try {\n        const params = {\n          status: \"cancel\", // 서버에 저장할 필드명 'profileImage'로 전송\n        };\n        // 서버에 프로필 이미지 업데이트 요청\n        const response = taskStore.updateTask(\n          `reservations/${this.reservationId}/status`,\n          params\n        );\n        console.log(\"dsfhdfsjkl;dsf\",params)\n        console.log(\"예약 취소 응답:\", response);\n        alert(\"예약이 취소되었습니다.\");\n        this.cancelMsg() // 예약 취소 메세지 전송\n\n        // 성공적으로 취소 후 모달 닫기\n        this.$emit(\"closeRModal\");\n        this.$emit(\"reservationCanceled\"); // 상위 컴포넌트에 이벤트 전달\n      } catch (error) {\n        console.error(\"예약 취소 실패:\", error);\n        alert(\"예약 취소에 실패했습니다. 다시 시도해주세요.\");\n      }\n    },\n\n    // 예약 취소 메세지 전송\n    async cancelMsg(){\n      const availableTime = this.time.split(\"[\")[0].trim();\n      const params =\n      {\n        // 해당 파라미터 값 채워 넣기!\n        phoneNumber: this.loginInfo.phoneNm, // loginInfo에서 phoneNm 사용\n        userName: this.loginInfo.name,   \n        availableTime, // 예약 시작 시간과 종료 시간\n    storeName: this.store,   \n      };\n      console.log(\"dklj\",params)\n      try {\n        const response = await taskStore.postTask(\n          `v1/sms/cancelReservation`,params\n        );\n        console.log(\"response\",response)\n        \n      } catch (error) {\n        console.error(\"API 호출 오류:\", error);\n      }\n      \n    }\n  },\n};\n</script>\n<style>\n/* 24.12.12 수정 */\n.popupu47defualt-3 {\n  align-items: center;\n  background-color: var(--blackwhitewhite);\n  border: 1px solid #dadada;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  padding: 20px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n/* 24.12.12 수정 */\n.frame-5-3 {\n  width: 14.9%;\n  align-items: center;\n  background-color: var(--blackwhitewhite);\n  display: inline-flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 8px;\n  position: relative;\n}\n\n/* 24.12.12 수정 */\n.frame-4-3 {\n  align-items: center;\n  display: inline-flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  gap: 10px;\n  padding: 24px 25px;\n}\n\n/* .x-45{\n  letter-spacing: -0.32px;\n  line-height: 24px;\n  margin-top: -1px;\n  position: relative;\n  text-align: center;\n  white-space: nowrap;\n  width: fit-content;\n}\n\n.text_label-33,\n.text_label-34 {\n  letter-spacing: -0.28px;\n  line-height: 21px;\n  position: relative;\n  text-align: center;\n  width: 226px;\n} */\n\n/* 24.12.12 수정 */\n.btn-group-3 {\n  /* align-items: flex-start;\n  display: inline-flex;\n  flex: 0 0 auto;\n  overflow: hidden;\n  position: relative; */\n  width: 100%;\n}\n\n/* 24.12.12 수정 - 추가 */\n.btnsecondary, .btnprimary-3 {\n  width: 50%;\n  height: 50px;\n  border: none;\n}\n\n/* 24.12.12 수정 */\n.btnsecondary {\n  background-color: var(--nobel);\n  border-bottom-left-radius: 8px;\n}\n\n/* 24.12.12 수정 */\n.btnprimary-3 {\n  \n  background-color: var(--monza);\n  border-bottom-right-radius: 8px;\n}\n\n</style>"],"mappings":"AA0BA,SAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,aAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;IACAG,IAAA;MACAL,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;IACAI,SAAA;MACAN,IAAA,EAAAO,MAAA;MACAL,QAAA;IACA;EACA;EACA;EACA;EACA;EACAM,OAAA;IACAC,YAAA;MACA;MACA,KAAAC,KAAA;IACA;IACA,MAAAC,kBAAA;MACA;QACA,MAAAC,MAAA;UACAC,MAAA;QACA;QACA;QACA,MAAAC,QAAA,GAAAlB,SAAA,CAAAmB,UAAA,CACA,qBAAAhB,aAAA,WACAa,MACA;QACAI,OAAA,CAAAC,GAAA,mBAAAL,MAAA;QACAI,OAAA,CAAAC,GAAA,cAAAH,QAAA;QACAI,KAAA;QACA,KAAAC,SAAA;;QAEA;QACA,KAAAT,KAAA;QACA,KAAAA,KAAA;MACA,SAAAU,KAAA;QACAJ,OAAA,CAAAI,KAAA,cAAAA,KAAA;QACAF,KAAA;MACA;IACA;IAEA;IACA,MAAAC,UAAA;MACA,MAAAE,aAAA,QAAAhB,IAAA,CAAAiB,KAAA,SAAAC,IAAA;MACA,MAAAX,MAAA,GACA;QACA;QACAY,WAAA,OAAAlB,SAAA,CAAAmB,OAAA;QAAA;QACAC,QAAA,OAAApB,SAAA,CAAAT,IAAA;QACAwB,aAAA;QAAA;QACAM,SAAA,OAAAxB;MACA;MACAa,OAAA,CAAAC,GAAA,SAAAL,MAAA;MACA;QACA,MAAAE,QAAA,SAAAlB,SAAA,CAAAgC,QAAA,CACA,4BAAAhB,MACA;QACAI,OAAA,CAAAC,GAAA,aAAAH,QAAA;MAEA,SAAAM,KAAA;QACAJ,OAAA,CAAAI,KAAA,eAAAA,KAAA;MACA;IAEA;EACA;AACA","ignoreList":[]}]}