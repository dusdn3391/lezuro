{"remainingRequest":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue","mtime":1733971396941},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5zb21lLmpzIjsKaW1wb3J0IEFkbWluSGVhZGVyIGZyb20gIi4vQWRtaW5IZWFkZXIudnVlIjsKaW1wb3J0IEFkbWluTmF2YmFyIGZyb20gIi4vQWRtaW5OYXZiYXIudnVlIjsKaW1wb3J0IHsgYWRtaW5TdG9yZSB9IGZyb20gIkAvc3RvcmUvYWRtaW5TdG9yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWRtaW5UZXJtc1dyaXRlIiwKICBjb21wb25lbnRzOiB7CiAgICBBZG1pbkhlYWRlciwKICAgIEFkbWluTmF2YmFyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRDYXRlZ29yeTogIiIsCiAgICAgIC8vIOyVveq0gCDsooXrpZgg7ISg7YOdCiAgICAgIHRlcm1zOiBbewogICAgICAgIHRpdGxlOiAi7KCcIDEg7KGwIiwKICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICB0eXBlOiAiIgogICAgICB9IC8vIOy0iOq4sCDrjbDsnbTthLAKICAgICAgXSwKICAgICAgaXNFZGl0OiBmYWxzZSwKICAgICAgaWQ6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8g65287Jqw7YSwIHBhcmFtc+yXkOyEnCDrjbDsnbTthLDrpbwg67Cb7JWE7Ji0CiAgICBjb25zdCB7CiAgICAgIGlkLAogICAgICB0aXRsZSwKICAgICAgY29udGVudCwKICAgICAgaXNFZGl0LAogICAgICB0eXBlCiAgICB9ID0gdGhpcy4kcm91dGUucGFyYW1zOwogICAgaWYgKGlzRWRpdCkgewogICAgICAvLyDsiJjsoJUg66qo65Oc7J28IOqyveyasCDrjbDsnbTthLDrpbwg7LSI6riw7ZmUCiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgICAgdGhpcy5pZCA9IGlkOwogICAgICB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnkgPSB0eXBlOwogICAgICB0aGlzLnRlcm1zID0gW3sKICAgICAgICB0aXRsZSwKICAgICAgICBjb250ZW50LAogICAgICAgIHR5cGU6ICIiCiAgICAgIH1dOwogICAgICBjb25zb2xlLmxvZygi7IiY7KCV7ZWgIOuNsOydtO2EsDoiLCB7CiAgICAgICAgaWQsCiAgICAgICAgdGl0bGUsCiAgICAgICAgY29udGVudCwKICAgICAgICB0eXBlCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgLy8g7IOIIOuNsOydtO2EsCDstpTqsIAg7IucIOy0iOq4sO2ZlAogICAgICB0aGlzLnRlcm1zID0gW3sKICAgICAgICB0aXRsZTogIuygnCAxIOyhsCIsCiAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgdHlwZTogIiIKICAgICAgfV07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDsg4gg7KGw7ZWtIOy2lOqwgAogICAgYWRkQXJ0aWNsZSgpIHsKICAgICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy50ZXJtcy5sZW5ndGggKyAxOwogICAgICB0aGlzLnRlcm1zLnB1c2goewogICAgICAgIHRpdGxlOiBg7KCcICR7bmV4dEluZGV4fSDsobBgLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIHR5cGU6IHRoaXMuc2VsZWN0ZWRDYXRlZ29yeQogICAgICB9KTsKICAgIH0sCiAgICBiYWNrTGlzdCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvYWRtaW50ZXJtcy1saXN0IgogICAgICB9KTsKICAgIH0sCiAgICAvLyDslb3qtIAg7KKF66WYIOyXheuNsOydtO2KuAogICAgdXBkYXRlVGVybXNUeXBlKCkgewogICAgICB0aGlzLnRlcm1zLmZvckVhY2godGVybSA9PiB7CiAgICAgICAgdGVybS50eXBlID0gdGhpcy5zZWxlY3RlZENhdGVnb3J5OwogICAgICB9KTsKICAgIH0sCiAgICAvLyDrjbDsnbTthLAg7KCA7J6lCiAgICBhc3luYyBzdWJtaXQoKSB7CiAgICAgIGlmICghdGhpcy5zZWxlY3RlZENhdGVnb3J5KSB7CiAgICAgICAgYWxlcnQoIuyVveq0gCDsooXrpZjrpbwg7ISg7YOd7ZW07KO87IS47JqULiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy50ZXJtcy5zb21lKHRlcm0gPT4gIXRlcm0udGl0bGUgfHwgIXRlcm0uY29udGVudCkpIHsKICAgICAgICBhbGVydCgi66qo65OgIOygnOuqqeqzvCDrgrTsmqnsnYQg7J6F66Cl7ZW07KO87IS47JqULiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHRlcm1zOiB0aGlzLnRlcm1zCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFkbWluU3RvcmUucG9zdFRhc2soInRlcm1zL3Rlcm0iLCBwYXJhbXMpOwogICAgICAgIGNvbnNvbGUubG9nKCLrk7HroZ0g7ISx6rO1OiIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGFsZXJ0KCLrk7HroZ3snbQg65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvYWRtaW50ZXJtcy1saXN0IgogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuuTseuhnSDsi6TtjKg6IiwgZXJyb3IpOwogICAgICAgIGFsZXJ0KCLrk7HroZ3sl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLiIpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgdXBkYXRlVGVybXMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g7ISc67KE7JeQIOyghOyGoe2VoCDrjbDsnbTthLAg7KSA67mECiAgICAgICAgY29uc3QgewogICAgICAgICAgdGl0bGUsCiAgICAgICAgICBjb250ZW50CiAgICAgICAgfSA9IHRoaXMudGVybXNbMF07IC8vIHRlcm1zIOuwsOyXtOydmCDssqsg67KI7Ke4IO2VreuqqeunjCDsoITshqEKICAgICAgICBjb25zb2xlLmxvZygi7IiY7KCVIOyalOyyrSB0aXRsZToiLCB0aXRsZSk7CiAgICAgICAgY29uc29sZS5sb2coIuyImOyglSDsmpTssq0gY29udGVudDoiLCBjb250ZW50KTsKICAgICAgICBjb25zb2xlLmxvZygi7IiY7KCVIOyalOyyrSBJRDoiLCB0aGlzLmlkKTsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICB0aXRsZSwKICAgICAgICAgIGNvbnRlbnQKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKCLsiJjsoJUg7KCEIiwgcGFyYW1zKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFkbWluU3RvcmUudXBkYXRlVGFzayhgdGVybXMvJHt0aGlzLmlkfWAsIHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coIuyImOyglSDtm4QiLCBwYXJhbXMpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCLsiJjsoJUg7ISx6rO1OiIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGFsZXJ0KCLsnbTsmqnslb3qtIDsnbQg7IiY7KCV65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvYWRtaW50ZXJtcy1saXN0IgogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuydtOyaqeyVveq0gCDsiJjsoJUg7Iuk7YyoOiIsIGVycm9yKTsKICAgICAgICBhbGVydCgi7J207Jqp7JW96rSAIOyImOygleyXkCDsi6TtjKjtlojsirXri4jri6QuIik7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["AdminHeader","AdminNavbar","adminStore","name","components","data","selectedCategory","terms","title","content","type","isEdit","id","mounted","$route","params","console","log","methods","addArticle","nextIndex","length","push","backList","$router","path","updateTermsType","forEach","term","submit","alert","some","response","postTask","error","updateTerms","updateTask"],"sources":["src/components/admin/AdminTermsWrite.vue"],"sourcesContent":["<template>\n  <div class=\"all\">\n    <AdminHeader />\n    <div class=\"wrap\">\n      <div class=\"reservation-container\">\n        <AdminNavbar />\n        <div class=\"wrapper\">\n          <div class=\"title-top pretendard-bold-log-cabin-38px\"> {{ isEdit ? \"이용약관 수정\" : \"이용약관 작성\" }}</div>\n          <div class=\"content-wrap\">\n            <div class=\"write-wrap\">\n              <div class=\"title-box\">\n                <div class=\"content-title valign-text-middle pretendard-medium-black-18px\">\n                  약관 종류\n                </div>\n                <select name=\"category\" id=\"category\" v-model=\"selectedCategory\"\n                  class=\"category-select pretendard-regular-normal-mine-shaft-16px\" @change=\"updateTermsType\">\n                  <option value=\"\" disabled selected>\n                    약관 종류를 선택해주세요\n                  </option>\n                  <option value=\"이용약관\">이용약관</option>\n                  <option value=\"개인정보\">개인정보처리방침</option>\n                  <option value=\"위치정보\">위치정보이용약관</option>\n                </select>\n              </div>\n              <div v-for=\"(article, index) in terms\" :key=\"index\" class=\"article-box\">\n                <!-- 제목 -->\n                <div class=\"title-box\">\n                  <input type=\"text\" class=\"frame-7281-8 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 제목을 입력해주세요`\" v-model=\"article.title\" />\n                </div>\n                <!-- 내용 -->\n                <div class=\"content-box\">\n                  <textarea class=\"frame-7281-9 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 내용을 입력해주세요`\" v-model=\"article.content\"></textarea>\n                </div>\n              </div>\n              <div class=\"button-container\">\n                <button class=\"cancel-button pretendard-medium-white-18px\" @click=\"backList\">\n                  취소하기\n                </button>\n                <!-- 24.12.12 수정 - 수정하기에서 버튼 없애기 -->\n                <button  v-if=\"!isEdit\" class=\"add-button pretendard-medium-white-18px\" @click=\"addArticle\">\n                  추가하기\n                </button>\n                <button class=\"submit-button pretendard-medium-white-18px\" @click=\"isEdit ? updateTerms() : submit()\">\n                  {{ isEdit ? \"수정하기\" : \"등록하기\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminHeader from \"./AdminHeader.vue\";\nimport AdminNavbar from \"./AdminNavbar.vue\";\nimport { adminStore } from \"@/store/adminStore\";\n\nexport default {\n  name: \"AdminTermsWrite\",\n  components: {\n    AdminHeader,\n    AdminNavbar,\n  },\n  data() {\n    return {\n      selectedCategory: \"\", // 약관 종류 선택\n      terms: [\n        { title: \"제 1 조\", content: \"\", type: \"\" }, // 초기 데이터\n      ],\n      isEdit: false,\n      id: null,\n    };\n  },\n  mounted() {\n    // 라우터 params에서 데이터를 받아옴\n    const { id, title, content, isEdit, type } = this.$route.params;\n\n    if (isEdit) {\n      // 수정 모드일 경우 데이터를 초기화\n      this.isEdit = true;\n      this.id = id;\n      this.selectedCategory = type;\n      this.terms = [{ title, content, type: \"\" }];\n      console.log(\"수정할 데이터:\", { id, title, content, type });\n    } else {\n      // 새 데이터 추가 시 초기화\n      this.terms = [{ title: \"제 1 조\", content: \"\", type: \"\" }];\n    }\n  },\n  methods: {\n    // 새 조항 추가\n    addArticle() {\n      const nextIndex = this.terms.length + 1;\n      this.terms.push({\n        title: `제 ${nextIndex} 조`,\n        content: \"\",\n        type: this.selectedCategory,\n      });\n    },\n    backList() {\n      this.$router.push({ path: \"/adminterms-list\" })\n    },\n    // 약관 종류 업데이트\n    updateTermsType() {\n      this.terms.forEach((term) => {\n        term.type = this.selectedCategory;\n      });\n    },\n    // 데이터 저장\n    async submit() {\n      if (!this.selectedCategory) {\n        alert(\"약관 종류를 선택해주세요.\");\n        return;\n      }\n\n      if (this.terms.some((term) => !term.title || !term.content)) {\n        alert(\"모든 제목과 내용을 입력해주세요.\");\n        return;\n      }\n\n      try {\n        const params = {\n          terms: this.terms,\n        };\n\n        const response = await adminStore.postTask(\"terms/term\", params);\n\n        console.log(\"등록 성공:\", response.data);\n        alert(\"등록이 되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"등록 실패:\", error);\n        alert(\"등록에 실패했습니다.\");\n      }\n    },\n    async updateTerms() {\n      try {\n        // 서버에 전송할 데이터 준비\n        const { title, content } = this.terms[0]; // terms 배열의 첫 번째 항목만 전송\n        console.log(\"수정 요청 title:\", title);\n        console.log(\"수정 요청 content:\", content);\n        console.log(\"수정 요청 ID:\", this.id);\n\n        const params = {\n          title,\n          content,\n        };\n        console.log(\"수정 전\", params)\n        const response = await adminStore.updateTask(`terms/${this.id}`, params);\n        console.log(\"수정 후\", params)\n        // console.log(\"수정 성공:\", response.data);\n        alert(\"이용약관이 수정되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"이용약관 수정 실패:\", error);\n        alert(\"이용약관 수정에 실패했습니다.\");\n      }\n    }\n\n\n  },\n};\n</script>\n<style scoped>\n.reservation-container {\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  background: #f5f6f6;\n}\n\n.title-top {\n  background-color: #fff;\n  padding: 30px;\n  margin-bottom: 20px;\n  /* 24.12.10 수정 - 추가 */\n  font-size: 28px;\n}\n\n.wrapper {\n  flex-grow: 1;\n  padding: 30px;\n  gap: 20px;\n}\n\n.article-box {\n  margin-bottom: 20px;\n}\n\n.title-box {\n  margin-bottom: 10px;\n}\n\n.content-box {\n  margin-bottom: 20px;\n}\n\n.button-container {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n\n.add-button,\n.cancel-button,\n.submit-button {\n  width: 200px;\n  padding: 15px;\n  border: none;\n  cursor: pointer;\n}\n\n/* 24.12.10 수정 - 추가 */\n.cancel-button {\n  background-color: #999;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.add-button {\n  background-color: #d30f1a;\n  color: white;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.submit-button {\n  background-color: #184199;\n  color: white;\n}\n\n.frame-7281-8 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  border: 0.5px solid #ddd;\n}\n\n.frame-7281-9 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  height: 100px;\n  border: 0.5px solid #ddd;\n  resize: none;\n}\n\n.write-wrap {\n  background-color: #fff;\n  padding: 30px;\n}\n\n.category-select {\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":";;;;AAyDA,OAAAA,WAAA;AACA,OAAAC,WAAA;AACA,SAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAJ,WAAA;IACAC;EACA;EACAI,KAAA;IACA;MACAC,gBAAA;MAAA;MACAC,KAAA,GACA;QAAAC,KAAA;QAAAC,OAAA;QAAAC,IAAA;MAAA;MAAA,CACA;MACAC,MAAA;MACAC,EAAA;IACA;EACA;EACAC,QAAA;IACA;IACA;MAAAD,EAAA;MAAAJ,KAAA;MAAAC,OAAA;MAAAE,MAAA;MAAAD;IAAA,SAAAI,MAAA,CAAAC,MAAA;IAEA,IAAAJ,MAAA;MACA;MACA,KAAAA,MAAA;MACA,KAAAC,EAAA,GAAAA,EAAA;MACA,KAAAN,gBAAA,GAAAI,IAAA;MACA,KAAAH,KAAA;QAAAC,KAAA;QAAAC,OAAA;QAAAC,IAAA;MAAA;MACAM,OAAA,CAAAC,GAAA;QAAAL,EAAA;QAAAJ,KAAA;QAAAC,OAAA;QAAAC;MAAA;IACA;MACA;MACA,KAAAH,KAAA;QAAAC,KAAA;QAAAC,OAAA;QAAAC,IAAA;MAAA;IACA;EACA;EACAQ,OAAA;IACA;IACAC,WAAA;MACA,MAAAC,SAAA,QAAAb,KAAA,CAAAc,MAAA;MACA,KAAAd,KAAA,CAAAe,IAAA;QACAd,KAAA,OAAAY,SAAA;QACAX,OAAA;QACAC,IAAA,OAAAJ;MACA;IACA;IACAiB,SAAA;MACA,KAAAC,OAAA,CAAAF,IAAA;QAAAG,IAAA;MAAA;IACA;IACA;IACAC,gBAAA;MACA,KAAAnB,KAAA,CAAAoB,OAAA,CAAAC,IAAA;QACAA,IAAA,CAAAlB,IAAA,QAAAJ,gBAAA;MACA;IACA;IACA;IACA,MAAAuB,OAAA;MACA,UAAAvB,gBAAA;QACAwB,KAAA;QACA;MACA;MAEA,SAAAvB,KAAA,CAAAwB,IAAA,CAAAH,IAAA,KAAAA,IAAA,CAAApB,KAAA,KAAAoB,IAAA,CAAAnB,OAAA;QACAqB,KAAA;QACA;MACA;MAEA;QACA,MAAAf,MAAA;UACAR,KAAA,OAAAA;QACA;QAEA,MAAAyB,QAAA,SAAA9B,UAAA,CAAA+B,QAAA,eAAAlB,MAAA;QAEAC,OAAA,CAAAC,GAAA,WAAAe,QAAA,CAAA3B,IAAA;QACAyB,KAAA;QACA,KAAAN,OAAA,CAAAF,IAAA;UAAAG,IAAA;QAAA;MACA,SAAAS,KAAA;QACAlB,OAAA,CAAAkB,KAAA,WAAAA,KAAA;QACAJ,KAAA;MACA;IACA;IACA,MAAAK,YAAA;MACA;QACA;QACA;UAAA3B,KAAA;UAAAC;QAAA,SAAAF,KAAA;QACAS,OAAA,CAAAC,GAAA,iBAAAT,KAAA;QACAQ,OAAA,CAAAC,GAAA,mBAAAR,OAAA;QACAO,OAAA,CAAAC,GAAA,mBAAAL,EAAA;QAEA,MAAAG,MAAA;UACAP,KAAA;UACAC;QACA;QACAO,OAAA,CAAAC,GAAA,SAAAF,MAAA;QACA,MAAAiB,QAAA,SAAA9B,UAAA,CAAAkC,UAAA,eAAAxB,EAAA,IAAAG,MAAA;QACAC,OAAA,CAAAC,GAAA,SAAAF,MAAA;QACA;QACAe,KAAA;QACA,KAAAN,OAAA,CAAAF,IAAA;UAAAG,IAAA;QAAA;MACA,SAAAS,KAAA;QACAlB,OAAA,CAAAkB,KAAA,gBAAAA,KAAA;QACAJ,KAAA;MACA;IACA;EAGA;AACA","ignoreList":[]}]}