{"remainingRequest":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/manager/NicePayConfirm.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/manager/NicePayConfirm.vue","mtime":1734589498870},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb25Nb3VudGVkLCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOyAvLyBBeGlvc+uhnCBIVFRQIOyalOyyrSDsspjrpqwKCi8vIOyduOymnSDqsrDqs7wg7YyM652866+47YSwCgpleHBvcnQgZGVmYXVsdCB7CiAgX19uYW1lOiAnTmljZVBheUNvbmZpcm0nLAogIHNldHVwKF9fcHJvcHMpIHsKICAgIGNvbnN0IGF1dGhSZXN1bHRDb2RlID0gcmVmKCIiKTsKICAgIGNvbnN0IGF1dGhSZXN1bHRNc2cgPSByZWYoIiIpOwogICAgY29uc3QgbmV4dEFwcFVSTCA9IHJlZigiIik7CiAgICBjb25zdCB0eFRpZCA9IHJlZigiIik7CiAgICBjb25zdCBhdXRoVG9rZW4gPSByZWYoIiIpOwogICAgY29uc3QgcGF5TWV0aG9kID0gcmVmKCIiKTsKICAgIGNvbnN0IG1pZCA9IHJlZigiIik7CiAgICBjb25zdCBtb2lkID0gcmVmKCIiKTsKICAgIGNvbnN0IGFtdCA9IHJlZigiIik7CiAgICBjb25zdCByZXFSZXNlcnZlZCA9IHJlZigiIik7CiAgICBjb25zdCBuZXRDYW5jZWxVUkwgPSByZWYoIiIpOwoKICAgIC8vIOyKueyduCDqsrDqs7wKICAgIGNvbnN0IHJlc3BvbnNlID0gcmVmKCIiKTsKICAgIGNvbnN0IG1lcmNoYW50S2V5ID0gIkVZenU4akdHTWZxYURFcDc2Z1Nja3V2bmFISHUrYkM0b3BzU042bEh2M2IybHVyTllrVlhyWjdaMUFvcVFuWEkzZUx1YVVGeW9STkM2RmtyelZqY2VnPT0iOyAvLyDsg4HsoJDtgqQKCiAgICAvLyBQT1NUIOyalOyyrSDtlajsiJgKICAgIGFzeW5jIGZ1bmN0aW9uIHJlcVBvc3QoZGF0YSwgdXJsKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdCh1cmwsIGRhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlcy5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkFQSSDtmLjstpwg7Jik66WYOiIsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfQoKICAgIC8vIEpTT04g7J2R64u1IOyymOumrAogICAgZnVuY3Rpb24ganNvblJlc3BEdW1wKHJlc3ApIHsKICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVzcCkpIHsKICAgICAgICBjb25zb2xlLmxvZyhgJHtrZXl9OiAke3ZhbHVlfWApOwogICAgICB9CiAgICB9CgogICAgLy8g6rKw7KCcIOyKueyduCDsspjrpqwKICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVBheW1lbnQoKSB7CiAgICAgIGlmIChhdXRoUmVzdWx0Q29kZS52YWx1ZSA9PT0gIjAwMDAiKSB7CiAgICAgICAgY29uc3QgZWRpRGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bLTpULl0vZywgIiIpLnNsaWNlKDAsIDE0KTsKICAgICAgICBjb25zdCBzaWduRGF0YSA9IENyeXB0b0pTLlNIQTI1NihhdXRoVG9rZW4udmFsdWUgKyBtaWQudmFsdWUgKyBhbXQudmFsdWUgKyBlZGlEYXRlICsgbWVyY2hhbnRLZXkpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpOwogICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gewogICAgICAgICAgVElEOiB0eFRpZC52YWx1ZSwKICAgICAgICAgIEF1dGhUb2tlbjogYXV0aFRva2VuLnZhbHVlLAogICAgICAgICAgTUlEOiBtaWQudmFsdWUsCiAgICAgICAgICBBbXQ6IGFtdC52YWx1ZSwKICAgICAgICAgIEVkaURhdGU6IGVkaURhdGUsCiAgICAgICAgICBTaWduRGF0YTogc2lnbkRhdGEsCiAgICAgICAgICBDaGFyU2V0OiAidXRmLTgiCiAgICAgICAgfTsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzcG9uc2UudmFsdWUgPSBhd2FpdCByZXFQb3N0KHJlcXVlc3REYXRhLCBuZXh0QXBwVVJMLnZhbHVlKTsKICAgICAgICAgIGpzb25SZXNwRHVtcChyZXNwb25zZS52YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuyKueyduCDsmpTssq0g7Iuk7YyoLiDrp53st6jshowg7KeE7ZaJIOykkS4uLiIpOwogICAgICAgICAgY29uc3QgY2FuY2VsRGF0YSA9IHsKICAgICAgICAgICAgVElEOiB0eFRpZC52YWx1ZSwKICAgICAgICAgICAgQXV0aFRva2VuOiBhdXRoVG9rZW4udmFsdWUsCiAgICAgICAgICAgIE1JRDogbWlkLnZhbHVlLAogICAgICAgICAgICBBbXQ6IGFtdC52YWx1ZSwKICAgICAgICAgICAgRWRpRGF0ZTogZWRpRGF0ZSwKICAgICAgICAgICAgU2lnbkRhdGE6IHNpZ25EYXRhLAogICAgICAgICAgICBOZXRDYW5jZWw6ICIxIiwKICAgICAgICAgICAgQ2hhclNldDogInV0Zi04IgogICAgICAgICAgfTsKICAgICAgICAgIHJlc3BvbnNlLnZhbHVlID0gYXdhaXQgcmVxUG9zdChjYW5jZWxEYXRhLCBuZXRDYW5jZWxVUkwudmFsdWUpOwogICAgICAgICAganNvblJlc3BEdW1wKHJlc3BvbnNlLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi7J247KadIOyLpO2MqDoiLCBhdXRoUmVzdWx0Q29kZS52YWx1ZSwgYXV0aFJlc3VsdE1zZy52YWx1ZSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBWdWUg7Lu07Y+s64SM7Yq46rCAIOuhnOuTnOuQmOuptCDsi6TtlokKICAgIG9uTW91bnRlZCgoKSA9PiB7CiAgICAgIC8vIFBIUCBQT1NUIOuNsOydtO2EsOulvCBKYXZhU2NyaXB066GcIOuwm+uKlCDroZzsp4Eg7ZWE7JqUCiAgICAgIC8vIOyYiOygnOyXkOyEnOuKlCDquLDrs7gg6rCSIOyEpOyglQogICAgICBhdXRoUmVzdWx0Q29kZS52YWx1ZSA9ICIwMDAwIjsgLy8g7JiI7KCcIOqwkgogICAgICBhdXRoUmVzdWx0TXNnLnZhbHVlID0gIuyEseqztSI7IC8vIOyYiOygnCDqsJIKICAgICAgbmV4dEFwcFVSTC52YWx1ZSA9ICJodHRwczovL2V4YW1wbGUuY29tL25leHRBcHAiOwogICAgICB0eFRpZC52YWx1ZSA9ICJ0ZXN0MTIzIjsKICAgICAgYXV0aFRva2VuLnZhbHVlID0gInRva2VuMTIzIjsKICAgICAgcGF5TWV0aG9kLnZhbHVlID0gIkNBUkQiOwogICAgICBtaWQudmFsdWUgPSAidGVzdE1JRCI7CiAgICAgIG1vaWQudmFsdWUgPSAidGVzdE9yZGVyMTIzIjsKICAgICAgYW10LnZhbHVlID0gIjEwMDAiOwogICAgICByZXFSZXNlcnZlZC52YWx1ZSA9ICJyZXNlcnZlZDEyMyI7CiAgICAgIG5ldENhbmNlbFVSTC52YWx1ZSA9ICJodHRwczovL2V4YW1wbGUuY29tL25ldENhbmNlbCI7CgogICAgICAvLyDqsrDsoJwg7Iq57J24IOyymOumrCDtmLjstpwKICAgICAgaGFuZGxlUGF5bWVudCgpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBfX3NmYzogdHJ1ZSwKICAgICAgYXV0aFJlc3VsdENvZGUsCiAgICAgIGF1dGhSZXN1bHRNc2csCiAgICAgIG5leHRBcHBVUkwsCiAgICAgIHR4VGlkLAogICAgICBhdXRoVG9rZW4sCiAgICAgIHBheU1ldGhvZCwKICAgICAgbWlkLAogICAgICBtb2lkLAogICAgICBhbXQsCiAgICAgIHJlcVJlc2VydmVkLAogICAgICBuZXRDYW5jZWxVUkwsCiAgICAgIHJlc3BvbnNlLAogICAgICBtZXJjaGFudEtleSwKICAgICAgcmVxUG9zdCwKICAgICAganNvblJlc3BEdW1wLAogICAgICBoYW5kbGVQYXltZW50CiAgICB9OwogIH0KfTs="},{"version":3,"names":["onMounted","ref","axios","authResultCode","authResultMsg","nextAppURL","txTid","authToken","payMethod","mid","moid","amt","reqReserved","netCancelURL","response","merchantKey","reqPost","data","url","res","post","headers","error","console","jsonRespDump","resp","key","value","Object","entries","log","handlePayment","ediDate","Date","toISOString","replace","slice","signData","CryptoJS","SHA256","toString","enc","Hex","requestData","TID","AuthToken","MID","Amt","EdiDate","SignData","CharSet","cancelData","NetCancel"],"sources":["NicePayConfirm.vue"],"sourcesContent":["<script setup>\nimport { onMounted, ref } from 'vue';\nimport axios from 'axios'; // Axios로 HTTP 요청 처리\n\n// 인증 결과 파라미터\nconst authResultCode = ref(\"\");\nconst authResultMsg = ref(\"\");\nconst nextAppURL = ref(\"\");\nconst txTid = ref(\"\");\nconst authToken = ref(\"\");\nconst payMethod = ref(\"\");\nconst mid = ref(\"\");\nconst moid = ref(\"\");\nconst amt = ref(\"\");\nconst reqReserved = ref(\"\");\nconst netCancelURL = ref(\"\");\n\n// 승인 결과\nconst response = ref(\"\");\nconst merchantKey =\n  \"EYzu8jGGMfqaDEp76gSckuvnaHHu+bC4opsSN6lHv3b2lurNYkVXrZ7Z1AoqQnXI3eLuaUFyoRNC6FkrzVjceg==\"; // 상점키\n\n// POST 요청 함수\nasync function reqPost(data, url) {\n  try {\n    const res = await axios.post(url, data, {\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"API 호출 오류:\", error);\n    throw error;\n  }\n}\n\n// JSON 응답 처리\nfunction jsonRespDump(resp) {\n  for (const [key, value] of Object.entries(resp)) {\n    console.log(`${key}: ${value}`);\n  }\n}\n\n// 결제 승인 처리\nasync function handlePayment() {\n  if (authResultCode.value === \"0000\") {\n    const ediDate = new Date().toISOString().replace(/[-:T.]/g, \"\").slice(0, 14);\n    const signData = CryptoJS.SHA256(\n      authToken.value + mid.value + amt.value + ediDate + merchantKey\n    ).toString(CryptoJS.enc.Hex);\n\n    const requestData = {\n      TID: txTid.value,\n      AuthToken: authToken.value,\n      MID: mid.value,\n      Amt: amt.value,\n      EdiDate: ediDate,\n      SignData: signData,\n      CharSet: \"utf-8\",\n    };\n\n    try {\n      response.value = await reqPost(requestData, nextAppURL.value);\n      jsonRespDump(response.value);\n    } catch (error) {\n      console.error(\"승인 요청 실패. 망취소 진행 중...\");\n      const cancelData = {\n        TID: txTid.value,\n        AuthToken: authToken.value,\n        MID: mid.value,\n        Amt: amt.value,\n        EdiDate: ediDate,\n        SignData: signData,\n        NetCancel: \"1\",\n        CharSet: \"utf-8\",\n      };\n      response.value = await reqPost(cancelData, netCancelURL.value);\n      jsonRespDump(response.value);\n    }\n  } else {\n    console.error(\"인증 실패:\", authResultCode.value, authResultMsg.value);\n  }\n}\n\n// Vue 컴포넌트가 로드되면 실행\nonMounted(() => {\n  // PHP POST 데이터를 JavaScript로 받는 로직 필요\n  // 예제에서는 기본 값 설정\n  authResultCode.value = \"0000\"; // 예제 값\n  authResultMsg.value = \"성공\"; // 예제 값\n  nextAppURL.value = \"https://example.com/nextApp\";\n  txTid.value = \"test123\";\n  authToken.value = \"token123\";\n  payMethod.value = \"CARD\";\n  mid.value = \"testMID\";\n  moid.value = \"testOrder123\";\n  amt.value = \"1000\";\n  reqReserved.value = \"reserved123\";\n  netCancelURL.value = \"https://example.com/netCancel\";\n\n  // 결제 승인 처리 호출\n  handlePayment();\n});\n</script>\n\n<template>\n  <div>\n    <h1>결제 승인 처리</h1>\n    <p>승인 결과: {{ response }}</p>\n  </div>\n</template>\n"],"mappings":"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","ignoreList":[]}]}