{"remainingRequest":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js!/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/PhoneCertification.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/PhoneCertification.vue","mtime":1735528673818},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js","mtime":1728542748260},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBIZWFkZXIgZnJvbSAiLi9IZWFkZXIudnVlIjsKaW1wb3J0IFhGb290ZXIgZnJvbSAiLi9YRm9vdGVyIjsKaW1wb3J0IFBob25lQ2VydGlmaWNhdGlvbkNvbmZpcm1Nb2RhbCBmcm9tICIuL1Bob25lQ2VydGlmaWNhdGlvbkNvbmZpcm1Nb2RhbCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGhvbmVDZXJ0aWZpY2F0aW9uIiwKICBjb21wb25lbnRzOiB7CiAgICBYRm9vdGVyLAogICAgUGhvbmVDZXJ0aWZpY2F0aW9uQ29uZmlybU1vZGFsLAogICAgSGVhZGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGhvbmVObTogJycsCiAgICAgIGlzTW9kYWxWaXNpYmxlOiBmYWxzZSwKICAgICAgaXNQaG9uZU51bWJlclJlZ2lzdGVyZWQ6IGZhbHNlLAogICAgICAvLyDtlbjrk5ztj7Ag67KI7Zi46rCAIOuTseuhneuQmOyXiOuKlOyngCDsl6zrtoDrpbwg7KCA7J6lCiAgICAgIHNob3dTbXM6IGZhbHNlLAogICAgICBTTVNObTogJycsCiAgICAgIGNvbnNmaXJtVHh0OiAn7J247Kad67KI7Zi4IOyghOyGoScsCiAgICAgIGlzUmVnaXN0ZXJlZDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNlbmRTTVNQaG9uZSgpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyDrsojtmLgg7ZmV7J24IOyalOyyrQogICAgICAgIGNvbnN0IHVzZXJDaGVja1JlcyA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly8xMy4xMjQuNjIuNjg6MzAwMC9hcGkvdjEvdXNlcnMvcGhvbmVObS8ke3RoaXMucGhvbmVObX1gKTsKCiAgICAgICAgLy8g67KI7Zi46rCAIOyhtOyerO2VmOuptCDrqqjri6zsnYQg7Je06rOgIOyiheujjAogICAgICAgIGlmICh1c2VyQ2hlY2tSZXMuZGF0YSkgewogICAgICAgICAgdGhpcy5vcGVuUGhvbmVDZXJ0aWZpY2F0aW9uTW9kYWwoZmFsc2UpOyAvLyDsg4Htg5zrpbwgZmFsc2XroZwg7ISk7KCVCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIC8vIOuyiO2YuOqwgCDsl4bsnLzrqbQoNDA0IOyXkOufrCkg7J247Kad67KI7Zi466W8IOyghOyGoQogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgICAgIHBob25lTnVtYmVyOiB0aGlzLnBob25lTm0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3Qgc21zUmVzID0gYXdhaXQgYXhpb3MucG9zdCgiaHR0cHM6Ly8xMy4xMjQuNjIuNjg6MzAwMC9hcGkvdjEvc21zL3NlbmQiLCBwYXJhbXMpOwogICAgICAgICAgICBpZiAoc21zUmVzLmRhdGEuZGF0YS5jb2RlID09PSAxMDAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93U21zID0gdHJ1ZTsKICAgICAgICAgICAgICBhbGVydCgi7Lm07Lm07Jik7Yah7Jy866GcIOyduOymneuyiO2YuOqwgCDrsJzshqHrkJjsl4jsirXri4jri6QuIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYWxlcnQoIuyduOymneuyiO2YuCDrsJzshqHsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLiIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChzbXNFcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBpbiBTTVMgc2VuZGluZzoiLCBzbXNFcnJvcik7CiAgICAgICAgICAgIGFsZXJ0KCLsnbjspp3rsojtmLgg7KCE7IahIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBpbiB1c2VyIHBob25lIGNoZWNrOiIsIGVycm9yKTsKICAgICAgICAgIGFsZXJ0KCLrsojtmLgg7ZmV7J24IOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFzeW5jIGNoZWNrUGhvbmVOdW1iZXIoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAicGhvbmVOdW1iZXIiOiB0aGlzLnBob25lLAogICAgICAgICJ2ZXJpZmljYXRpb25Db2RlIjogdGhpcy5TTVNObQogICAgICB9OwogICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwczovLzEzLjEyNC42Mi42ODozMDAwL2FwaS92MS9zbXMvdmVyaWZ5LWNvZGUnLCBwYXJhbXMpOwogICAgICBjb25zb2xlLmxvZygicmVzIDogOiA6ICIsIEpTT04uc3RyaW5naWZ5KHJlcykpOwoKICAgICAgLy8g7JiI7IucOiBBUEkg7JqU7LKtIO2bhCDsi6TsoJwg6rKw6rO87JeQIOuUsOudvCDshKTsoJUKCiAgICAgIGlmIChyZXMpIHsKICAgICAgICB0aGlzLmlzUmVnaXN0ZXJlZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc1JlZ2lzdGVyZWQgPSBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLm9wZW5QaG9uZUNlcnRpZmljYXRpb25Nb2RhbCh0aGlzLmlzUmVnaXN0ZXJlZCk7CiAgICAgIC8vIOuqqOuLrCDsl7TquLAg67CPIOyDge2DnCDsoIDsnqUKICAgIH0sCiAgICBvcGVuUGhvbmVDZXJ0aWZpY2F0aW9uTW9kYWwoaXNSZWdpc3RlcmVkKSB7CiAgICAgIHRoaXMuaXNNb2RhbFZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmlzUGhvbmVOdW1iZXJSZWdpc3RlcmVkID0gaXNSZWdpc3RlcmVkOyAvLyB0cnVlIOuYkOuKlCBmYWxzZeuhnCDtlbjrk5ztj7Ag67KI7Zi4IOyDge2DnCDshKTsoJUKICAgICAgLy8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInBob25lTm8iKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Bob25lTm8nLCB0aGlzLnBob25lTm0pOwogICAgfSwKICAgIGNsb3NlUGhvbmVDZXJ0aWZpY2F0aW9uTW9kYWwoKSB7CiAgICAgIHRoaXMuaXNNb2RhbFZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBuYXZpZ2F0ZVRvU2lnbnVwKCkgewogICAgICBpZiAodGhpcy5pc1JlZ2lzdGVyZWQgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3NpZ251cCIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNNb2RhbFZpc2libGUgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["Header","XFooter","PhoneCertificationConfirmModal","axios","name","components","data","phoneNm","isModalVisible","isPhoneNumberRegistered","showSms","SMSNm","consfirmTxt","isRegistered","methods","sendSMSPhone","userCheckRes","get","openPhoneCertificationModal","error","response","status","params","phoneNumber","smsRes","post","code","alert","smsError","console","checkPhoneNumber","phone","res","log","JSON","stringify","localStorage","setItem","closePhoneCertificationModal","navigateToSignup","$router","push"],"sources":["src/components/PhoneCertification.vue"],"sourcesContent":["<template>\n  <div class=\"container-center-horizontal\">\n    <div class=\"signup1-2 screen\">\n      <Header />\n      <div class=\"signup1-wrap\">\n        <div class=\"signup1-wrap-title valign-text-middle pretendard-extra-extra-bold-black-30px\">휴대폰 인증</div>\n        <div class=\"signup1-input-align\">\n          <input type=\"text\" class=\"signup1-input-box pretendard-regular-normal-mountain-mist-20px\" v-model=\"phoneNm\"\n              maxlength=\"11\" :readonly=\"showSms\"\n            placeholder=\"휴대폰 번호 입력해주세요\" />\n\n            <input v-if=\"showSms\" type=\"text\" class=\"signup1-input-box pretendard-regular-normal-mountain-mist-20px\" v-model=\"SMSNm\"\n                    maxlength=\"6\"\n            placeholder=\"인증번호를 입력해주세요\" />\n          <button v-if=\"showSms\" class=\"cert-btn pretendard-extra-extra-bold-white-20px\"\n            @click=\"checkPhoneNumber\">인증하기</button>\n          <button v-else class=\"cert-btn pretendard-extra-extra-bold-white-20px\"\n            @click=\"sendSMSPhone\">인증번호 전송</button>\n           \n        </div>\n      </div>\n      <XFooter />\n      <PhoneCertificationConfirmModal v-if=\"isModalVisible\" :isRegistered=\"isPhoneNumberRegistered\"\n        @close=\"closePhoneCertificationModal\" @confirm=\"navigateToSignup\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"./Header.vue\"\nimport XFooter from \"./XFooter\";\nimport PhoneCertificationConfirmModal from \"./PhoneCertificationConfirmModal\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"PhoneCertification\",\n  components: {\n    XFooter,\n    PhoneCertificationConfirmModal,\n    Header\n  },\n  data() {\n    return {\n      phoneNm: '',\n      isModalVisible: false,\n      isPhoneNumberRegistered: false, // 핸드폰 번호가 등록되었는지 여부를 저장\n      showSms :false,\n      SMSNm : '',\n      consfirmTxt : '인증번호 전송',\n      isRegistered : null\n    };\n  },\n  methods: {\n    async sendSMSPhone() {\n      try {\n        // 번호 확인 요청\n        const userCheckRes = await axios.get(\n          `https://13.124.62.68:3000/api/v1/users/phoneNm/${this.phoneNm}`\n        );\n\n        // 번호가 존재하면 모달을 열고 종료\n        if (userCheckRes.data) {\n          this.openPhoneCertificationModal(false); // 상태를 false로 설정\n          return;\n        }\n      } catch (error) {\n        // 번호가 없으면(404 에러) 인증번호를 전송\n        if (error.response && error.response.status === 404) {\n          try {\n            const params = {\n              phoneNumber: this.phoneNm,\n            };\n            const smsRes = await axios.post(\n              \"https://13.124.62.68:3000/api/v1/sms/send\",\n              params\n            );\n\n            if (smsRes.data.data.code === 1000) {\n              this.showSms = true;\n              alert(\"카카오톡으로 인증번호가 발송되었습니다.\");\n            } else {\n              alert(\"인증번호 발송에 실패했습니다.\");\n            }\n          } catch (smsError) {\n            console.error(\"Error in SMS sending:\", smsError);\n            alert(\"인증번호 전송 중 오류가 발생했습니다.\");\n          }\n        } else {\n          console.error(\"Error in user phone check:\", error);\n          alert(\"번호 확인 중 오류가 발생했습니다.\");\n        }\n      }\n    },\n\n   async checkPhoneNumber() {\n    const params =\n      {\n        \"phoneNumber\": this.phone,\n        \"verificationCode\": this.SMSNm\n      };\n      const res = await axios.post('https://13.124.62.68:3000/api/v1/sms/verify-code',params);\n\n      console.log(\"res : : : \" , JSON.stringify(res))\n      \n       // 예시: API 요청 후 실제 결과에 따라 설정\n\n      if(res){\n        this.isRegistered = true;\n      }else{\n        this.isRegistered = false;\n      }\n\n      this.openPhoneCertificationModal(this.isRegistered);\n      // 모달 열기 및 상태 저장\n    },\n    openPhoneCertificationModal(isRegistered) {\n      this.isModalVisible = true;\n      this.isPhoneNumberRegistered = isRegistered; // true 또는 false로 핸드폰 번호 상태 설정\n      // localStorage.getItem(\"phoneNo\");\n      localStorage.setItem('phoneNo', this.phoneNm);\n\n    },\n    closePhoneCertificationModal() {\n      this.isModalVisible = false;\n    },\n    navigateToSignup() {\n      if(this.isRegistered === true){\n        this.$router.push(\"/signup\");\n      }else{\n        this.isModalVisible = false;\n      }\n      \n    },\n  },\n};\n</script>\n\n<style scoped src=\"@/style/signup/phonecertification.css\" />"],"mappings":";AA6BA,OAAAA,MAAA;AACA,OAAAC,OAAA;AACA,OAAAC,8BAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAJ,OAAA;IACAC,8BAAA;IACAF;EACA;EACAM,KAAA;IACA;MACAC,OAAA;MACAC,cAAA;MACAC,uBAAA;MAAA;MACAC,OAAA;MACAC,KAAA;MACAC,WAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,aAAA;MACA;QACA;QACA,MAAAC,YAAA,SAAAb,KAAA,CAAAc,GAAA,CACA,uDAAAV,OAAA,EACA;;QAEA;QACA,IAAAS,YAAA,CAAAV,IAAA;UACA,KAAAY,2BAAA;UACA;QACA;MACA,SAAAC,KAAA;QACA;QACA,IAAAA,KAAA,CAAAC,QAAA,IAAAD,KAAA,CAAAC,QAAA,CAAAC,MAAA;UACA;YACA,MAAAC,MAAA;cACAC,WAAA,OAAAhB;YACA;YACA,MAAAiB,MAAA,SAAArB,KAAA,CAAAsB,IAAA,CACA,6CACAH,MACA;YAEA,IAAAE,MAAA,CAAAlB,IAAA,CAAAA,IAAA,CAAAoB,IAAA;cACA,KAAAhB,OAAA;cACAiB,KAAA;YACA;cACAA,KAAA;YACA;UACA,SAAAC,QAAA;YACAC,OAAA,CAAAV,KAAA,0BAAAS,QAAA;YACAD,KAAA;UACA;QACA;UACAE,OAAA,CAAAV,KAAA,+BAAAA,KAAA;UACAQ,KAAA;QACA;MACA;IACA;IAEA,MAAAG,iBAAA;MACA,MAAAR,MAAA,GACA;QACA,oBAAAS,KAAA;QACA,yBAAApB;MACA;MACA,MAAAqB,GAAA,SAAA7B,KAAA,CAAAsB,IAAA,qDAAAH,MAAA;MAEAO,OAAA,CAAAI,GAAA,eAAAC,IAAA,CAAAC,SAAA,CAAAH,GAAA;;MAEA;;MAEA,IAAAA,GAAA;QACA,KAAAnB,YAAA;MACA;QACA,KAAAA,YAAA;MACA;MAEA,KAAAK,2BAAA,MAAAL,YAAA;MACA;IACA;IACAK,4BAAAL,YAAA;MACA,KAAAL,cAAA;MACA,KAAAC,uBAAA,GAAAI,YAAA;MACA;MACAuB,YAAA,CAAAC,OAAA,iBAAA9B,OAAA;IAEA;IACA+B,6BAAA;MACA,KAAA9B,cAAA;IACA;IACA+B,iBAAA;MACA,SAAA1B,YAAA;QACA,KAAA2B,OAAA,CAAAC,IAAA;MACA;QACA,KAAAjC,cAAA;MACA;IAEA;EACA;AACA","ignoreList":[]}]}