{"remainingRequest":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js!/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js!/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js??ref--1-0!/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/admin/AdminHeader.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/admin/AdminHeader.vue","mtime":1735528670971},{"path":"/usr/vue/lezuro_all/babel.config.js","mtime":1728542743944},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/thread-loader/dist/cjs.js","mtime":1728542748260},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRtaW5IZWFkZXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0xvZ2dlZEluOiBmYWxzZSwKICAgICAgLy8g66Gc6re47J24IOyDge2DnAogICAgICBhY3RpdmVNZW51OiAnJywKICAgICAgLy8g7ZiE7J6sIO2ZnOyEsSDrqZTribQg7ZWt66qpCiAgICAgIHVzZXJOYW1lOiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDroZzqt7jsnbgg7IOB7YOc66W8IO2ZleyduCAo7JiIOiDroZzsu6wg7Iqk7Yag66as7KeA7JeQ7IScIO2GoO2BsCDtmZXsnbgpCiAgICBjb25zdCBhZG1pblRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFkbWluVG9rZW4iKTsKICAgIGNvbnNvbGUubG9nKCJhZG1pblRva2VuIDogOiA6ICIsIGFkbWluVG9rZW4pOwogICAgaWYgKGFkbWluVG9rZW4pIHsKICAgICAgdGhpcy5pc0xvZ2dlZEluID0gdHJ1ZTsKICAgICAgLy8gY29uc29sZS5sb2coImxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpbkluZm8nKSA6IDogOiIgLGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpbkluZm8nKSkKICAgICAgLy8gY29uc3QgbWFuYWdlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtYW5hZ2VySW5mbycpKTsKICAgICAgLy8gY29uc29sZS5sb2coIm1hbmFnZXJUb2tlbiA6IDogOiAiICwgbWFuYWdlckluZm8pCiAgICAgIHRoaXMuY2hlY2tBdXRoKGFkbWluVG9rZW4pOwoKICAgICAgLy8gdGhpcy51c2VyTmFtZSA9IG1hbmFnZXJJbmZvLm5hbWUKICAgICAgY29uc3QgaXNGaXJzdExvZ2luID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFkbWluTG9naW4iKTsKICAgICAgaWYgKGlzRmlyc3RMb2dpbiA9PT0gInRydWUiKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImFkbWluTG9naW4iLCAiZmFsc2UiKTsgLy8g7IOI66Gc6rOg7LmoIO2bhCDtlIzrnpjqt7jrpbwgZmFsc2XroZwg67OA6rK9CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9CiAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgICAgdGhpcy5sb2dPdXQoKTsgLy8g66Gc6re47JWE7JuDIOuplOyEnOuTnCDtmLjstpwKICAgICAgLy8gICB9LCA2MCAqIDYwICogMTAwMCk7IC8vIDHsi5zqsIQgPSA2MOu2hCAqIDYw7LSIICogMTAwMOuwgOumrOy0iAogICAgfSBlbHNlIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvQWRtaW5Mb2dpbiIKICAgICAgfSk7CiAgICAgIHRoaXMuaXNMb2dnZWRJbiA9IGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0QWN0aXZlTWVudShtZW51KSB7CiAgICAgIHRoaXMuYWN0aXZlTWVudSA9IG1lbnU7IC8vIO2BtOumre2VnCDrqZTribQg7ZWt66qp7J2EIO2ZnOyEse2ZlAogICAgfSwKICAgIGxvZ091dCgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImFkbWluVG9rZW4iKTsKICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIm1hbmFnZXJJbmZvIik7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0sCiAgICBhc3luYyBjaGVja0F1dGgodG9rZW5zKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vMTMuMTI0LjYyLjY4OjMwMDAvYXBpL3YxL2F1dGgvbGlzdGAsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW5zfWAKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UgOiA6IDogOiAiLCByZXNwb25zZSk7CiAgICAgICAgLy8gdGhpcy5nZXRSZWZyZXNoVG9rZW4odG9rZW5zKQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMubG9nT3V0KCk7CiAgICAgICAgLy8g7Jes6riw7IScIOumrO2UhOugiOyLnCDthqDtgbAg67CPIOyXkeyEuOyKpCDthqDtgbAg7J6sIOqwseyLoAogICAgICAgIC8vIHRoaXMuZ2V0UmVmcmVzaFRva2VuKHRva2VucykKICAgICAgICAvLyAudGhlbigoZGF0YSkgPT4gewogICAgICAgIC8vICAgY29uc29sZS5sb2coIuqwseyLoOuQnCDrjbDsnbTthLA6IiwgZGF0YSk7CiAgICAgICAgLy8gICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5Ub2tlbicsIGRhdGEudG9rZW4pOwogICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImFkbWluTG9naW4iICwidHJ1ZSIpO30pOwogICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICBjb25zb2xlLmVycm9yKCLthqDtgbAg6rCx7IugIOyXkOufrDoiLCBlcnJvcik7CiAgICAgICAgdGhyb3cgZXJyb3I7IC8vIOyXkOufrOulvCDtmLjstpztlZwg6rOz7Jy866GcIOuLpOyLnCDrjZjsp5AKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFJlZnJlc2hUb2tlbih0b2tlbnMpIHsKICAgICAgY29uc29sZS5sb2coIuyXrOq4sOqwgCDrgpjsmYDslbwg65Cc64ukLiIpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwczovLzEzLjEyNC42Mi42ODozMDAwL2FwaS92MS9hdXRoL3JlZnJlc2gnLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2Vuc31gCiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIFJlc3BvbnNlIOyYiOygnDogCiAgICAgICAgLy8geyJ0b2tlbiI6Ii4uLiIsICJyZWZyZXNoVG9rZW4iOiIuLi4iLCAidG9rZW5FeHBpcmVzIjouLi59CgogICAgICAgIC8vIO2VhOyalO2VnCDrjbDsnbTthLDrp4wg66as7YS0CiAgICAgICAgY29uc3QgewogICAgICAgICAgdG9rZW4sCiAgICAgICAgICByZWZyZXNoVG9rZW4sCiAgICAgICAgICB0b2tlbkV4cGlyZXMKICAgICAgICB9ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZygi7IOI66Gc7Jq0IO2GoO2BsDoiLCB0b2tlbik7CiAgICAgICAgY29uc29sZS5sb2coIuyDiOuhnOyatCDrpqztlITroIjsi5wg7Yag7YGwOiIsIHJlZnJlc2hUb2tlbik7CiAgICAgICAgY29uc29sZS5sb2coIu2GoO2BsCDrp4zro4wg7Iuc6rCEOiIsIHRva2VuRXhwaXJlcyk7CgogICAgICAgIC8vIOqwneyytCDtmJXtg5zroZwg66as7YS0CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRva2VuLAogICAgICAgICAgcmVmcmVzaFRva2VuLAogICAgICAgICAgdG9rZW5FeHBpcmVzCiAgICAgICAgfTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCLthqDtgbAg6rCx7IugIOyXkOufrDoiLCBlcnJvcik7CiAgICAgICAgdGhyb3cgZXJyb3I7IC8vIOyXkOufrOulvCDtmLjstpztlZwg6rOz7Jy866GcIOuLpOyLnCDrjZjsp5AKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["axios","name","data","isLoggedIn","activeMenu","userName","mounted","adminToken","localStorage","getItem","console","log","checkAuth","isFirstLogin","setItem","window","location","reload","$router","push","path","methods","setActiveMenu","menu","logOut","removeItem","tokens","response","get","headers","error","getRefreshToken","token","refreshToken","tokenExpires"],"sources":["src/components/admin/AdminHeader.vue"],"sourcesContent":["<template>\n  <header>\n    <div class=\"center\">\n      <!-- 로고 섹션 -->\n      <div class=\"logo-container\">\n        <img src=\"../../../img/lezuro-logo-white-2-3@2x.png\" alt=\"Logo\" class=\"logo-image\" />\n      </div>\n      <!-- 우측 메뉴 섹션 -->\n      <div class=\"menu-container\">\n        <router-link :to=\"{ path: '/' }\">\n          <div class=\"menu-link\">\n            <img src=\"../../../img/Vector-2.png\" alt=\"\">\n            홈페이지\n          </div>\n        </router-link>\n        <span class=\"separator\">|</span>\n        <div class=\"menu-link\" @click=\"logOut()\">로그아웃</div>\n      </div>\n    </div>\n  </header>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AdminHeader',\n  data() {\n    return {\n      isLoggedIn: false, // 로그인 상태\n      activeMenu: '', // 현재 활성 메뉴 항목\n      userName : '',\n    };\n  },\n  mounted() {\n    // 로그인 상태를 확인 (예: 로컬 스토리지에서 토큰 확인)\n    const adminToken = localStorage.getItem(\"adminToken\");\n    \n    console.log(\"adminToken : : : \" , adminToken)\n     \n    if(adminToken){\n      this.isLoggedIn =  true;\n      // console.log(\"localStorage.getItem('loginInfo') : : :\" ,localStorage.getItem('loginInfo'))\n      // const managerInfo = JSON.parse(localStorage.getItem('managerInfo'));\n      // console.log(\"managerToken : : : \" , managerInfo)\n      this.checkAuth(adminToken)\n\n      // this.userName = managerInfo.name\n      const isFirstLogin = localStorage.getItem(\"adminLogin\");\n      if (isFirstLogin === \"true\") {\n        localStorage.setItem(\"adminLogin\", \"false\"); // 새로고침 후 플래그를 false로 변경\n        window.location.reload();\n      }\n      // setTimeout(() => {\n      //     this.logOut(); // 로그아웃 메서드 호출\n      //   }, 60 * 60 * 1000); // 1시간 = 60분 * 60초 * 1000밀리초\n      \n    }else{\n      this.$router.push({path:\"/AdminLogin\"})\n      this.isLoggedIn =  false;\n    }\n     \n    \n    \n\n  },\n  methods: {\n    setActiveMenu(menu) {\n      this.activeMenu = menu; // 클릭한 메뉴 항목을 활성화\n    },\n    logOut(){\n      \n      localStorage.removeItem(\"adminToken\");\n      // localStorage.removeItem(\"managerInfo\");\n      window.location.reload();\n    },\n\n    async checkAuth(tokens){\n    try {\n          const response = await axios.get(`https://13.124.62.68:3000/api/v1/auth/list`, {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${tokens}`,\n            },\n          });\n          console.log(\"response : : : : \" , response)\n          // this.getRefreshToken(tokens)\n\n        } catch (error) {\n          this.logOut();\n          // 여기서 리프레시 토큰 및 엑세스 토큰 재 갱신\n          // this.getRefreshToken(tokens)\n          // .then((data) => {\n          //   console.log(\"갱신된 데이터:\", data);\n          //   localStorage.setItem('adminToken', data.token);\n          //   localStorage.setItem(\"adminLogin\" ,\"true\");});\n            // window.location.reload();\n            console.error(\"토큰 갱신 에러:\", error);\n          throw error; // 에러를 호출한 곳으로 다시 던짐\n        }\n   },\n   async getRefreshToken(tokens){\n    console.log(\"여기가 나와야 된다.\")\n      try {\n          const response = await axios.get('https://13.124.62.68:3000/api/v1/auth/refresh', {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${tokens}`,\n            },\n          });\n\n          // Response 예제: \n          // {\"token\":\"...\", \"refreshToken\":\"...\", \"tokenExpires\":...}\n\n          // 필요한 데이터만 리턴\n          const { token, refreshToken, tokenExpires } = response.data;\n\n          console.log(\"새로운 토큰:\", token);\n          console.log(\"새로운 리프레시 토큰:\", refreshToken);\n          console.log(\"토큰 만료 시간:\", tokenExpires);\n\n          // 객체 형태로 리턴\n          return { token, refreshToken, tokenExpires };\n\n        } catch (error) {\n          console.error(\"토큰 갱신 에러:\", error);\n          throw error; // 에러를 호출한 곳으로 다시 던짐\n        }\n    },\n  }\n};\n</script>\n\n<style scoped>\nheader {\n  height: 90px;\n  background-color: #001A51;\n}\n\n.center {\n  display: flex;\n  align-items: center;\n  padding: 25px 41px;\n  justify-content: space-between;\n}\n\n.logo-container {\n  display: flex;\n  align-items: center;\n  margin-left: 76px;\n}\n\n.logo-image {\n  width: 126px;\n}\n\n.logo-text {\n  color: white;\n  margin-left: 10px;\n}\n\n.menu-container {\n  display: flex;\n  align-items: center;\n  color: white;\n}\n\n.menu-link {\n  color: white;\n  text-decoration: none;\n  margin: 0 15px;\n}\n\n.separator {\n  color: white;\n}\n</style>\n"],"mappings":";AAuBA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MAAA;MACAC,UAAA;MAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,MAAAC,UAAA,GAAAC,YAAA,CAAAC,OAAA;IAEAC,OAAA,CAAAC,GAAA,sBAAAJ,UAAA;IAEA,IAAAA,UAAA;MACA,KAAAJ,UAAA;MACA;MACA;MACA;MACA,KAAAS,SAAA,CAAAL,UAAA;;MAEA;MACA,MAAAM,YAAA,GAAAL,YAAA,CAAAC,OAAA;MACA,IAAAI,YAAA;QACAL,YAAA,CAAAM,OAAA;QACAC,MAAA,CAAAC,QAAA,CAAAC,MAAA;MACA;MACA;MACA;MACA;IAEA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;MACA,KAAAjB,UAAA;IACA;EAKA;EACAkB,OAAA;IACAC,cAAAC,IAAA;MACA,KAAAnB,UAAA,GAAAmB,IAAA;IACA;IACAC,OAAA;MAEAhB,YAAA,CAAAiB,UAAA;MACA;MACAV,MAAA,CAAAC,QAAA,CAAAC,MAAA;IACA;IAEA,MAAAL,UAAAc,MAAA;MACA;QACA,MAAAC,QAAA,SAAA3B,KAAA,CAAA4B,GAAA;UACAC,OAAA;YACA;YACA,2BAAAH,MAAA;UACA;QACA;QACAhB,OAAA,CAAAC,GAAA,sBAAAgB,QAAA;QACA;MAEA,SAAAG,KAAA;QACA,KAAAN,MAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAd,OAAA,CAAAoB,KAAA,cAAAA,KAAA;QACA,MAAAA,KAAA;MACA;IACA;IACA,MAAAC,gBAAAL,MAAA;MACAhB,OAAA,CAAAC,GAAA;MACA;QACA,MAAAgB,QAAA,SAAA3B,KAAA,CAAA4B,GAAA;UACAC,OAAA;YACA;YACA,2BAAAH,MAAA;UACA;QACA;;QAEA;QACA;;QAEA;QACA;UAAAM,KAAA;UAAAC,YAAA;UAAAC;QAAA,IAAAP,QAAA,CAAAzB,IAAA;QAEAQ,OAAA,CAAAC,GAAA,YAAAqB,KAAA;QACAtB,OAAA,CAAAC,GAAA,iBAAAsB,YAAA;QACAvB,OAAA,CAAAC,GAAA,cAAAuB,YAAA;;QAEA;QACA;UAAAF,KAAA;UAAAC,YAAA;UAAAC;QAAA;MAEA,SAAAJ,KAAA;QACApB,OAAA,CAAAoB,KAAA,cAAAA,KAAA;QACA,MAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}