{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/ResetPassword.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/ResetPassword.vue","mtime":1735528665989},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIZWFkZXIgZnJvbSAiLi9IZWFkZXIiOwppbXBvcnQgWEZvb3RlciBmcm9tICIuL1hGb290ZXIiOwppbXBvcnQgUmVzZXRQYXNzd29yZENvbmZpcm1Nb2RhbCBmcm9tICIuL1Jlc2V0UGFzc3dvcmRDb25maXJtTW9kYWwiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXNldFBhc3N3b3JkIiwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXIsCiAgICBYRm9vdGVyLAogICAgUmVzZXRQYXNzd29yZENvbmZpcm1Nb2RhbCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc01vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIG5ld1Bhc3N3b3JkOiAiIiwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKICAgICAgY29uZmlybU5ld1Bhc3N3b3JkOiAiIiwKICAgICAgcGhvbmU6IHRoaXMuJHJvdXRlLnBhcmFtcy5waG9uZSB8fCAiIiwgCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGVQYXNzd29yZCgpIHsKICAgICAgLy8g7LWc7IaMIDh+MjDsnpAsIOyXsOyGjeuQnCDrrLjsnpDrpbwg7IKs7Jqp7ZWgIOyImCDsl4bsnYwKICAgICAgY29uc3QgcmVnZXggPSAvXig/IS4qW15hLXpBLVowLTldKSg/IS4qKC4pXDF7Mix9KS57OCwyMH0kLzsKICAgICAgdGhpcy5wd0Vycm9yID0gIXJlZ2V4LnRlc3QodGhpcy5uZXdQYXNzd29yZCkKICAgICAgICA/ICLruYTrsIDrsojtmLjripQgOH4yMOyekCDsnbTrgrTroZwg7J6F66Cl7ZW07JW8IO2VmOupsCDsl7Dsho3rkJwg66y47J6Q7JmAIO2KueyImOusuOyekOulvCDsgqzsmqntlaAg7IiYIOyXhuyKteuLiOuLpC4iCiAgICAgICAgOiBudWxsOwogICAgfSwKICAgIHNob3dNb2RhbCgpIHsKICAgICAgdGhpcy5pc01vZGFsVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGlkZU1vZGFsKCkgewogICAgICB0aGlzLmlzTW9kYWxWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgaGFuZGxlUGFzc3dvcmRDaGFuZ2UoKSB7CiAgICAgIGlmICh0aGlzLm5ld1Bhc3N3b3JkICE9PSB0aGlzLmNvbmZpcm1OZXdQYXNzd29yZCkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIuyDiCDruYTrsIDrsojtmLjqsIAg7J287LmY7ZWY7KeAIOyViuyKteuLiOuLpC4iOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKCiAgICAgICAgLy8g7ISc67KE66GcIOu5hOuwgOuyiO2YuCDrs4Dqsr0g7JqU7LKtCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgImh0dHBzOi8vMTMuMTI0LjYyLjY4OjMwMDAvYXBpL3YxL2F1dGgvcmVzZXQtcGFzc3dvcmQiLAogICAgICAgICAgewogICAgICAgICAgICBwaG9uZTogdGhpcy5waG9uZSwKICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHRoaXMubmV3UGFzc3dvcmQsCiAgICAgICAgICAgIGNvbmZpcm1OZXdQYXNzd29yZDogdGhpcy5jb25maXJtTmV3UGFzc3dvcmQsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApOwoKICAgICAgICAvLyDsnZHri7Ug7LKY66asCiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi67mE67CA67KI7Zi4IOuzgOqyvSDshLHqs7U6IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICBhbGVydCgi67mE67CA67KI7Zi46rCAIOyEseqzteyggeycvOuhnCDrs4Dqsr3rkJjsl4jsirXri4jri6QuIik7CiAgICAgICAgICB0aGlzLnNob3dNb2RhbCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgi67mE67CA67KI7Zi4IOuzgOqyveyXkCDsi6TtjKjtlojsirXri4jri6QuIik7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuu5hOuwgOuyiO2YuCDrs4Dqsr0g7KSRIOyYpOulmCDrsJzsg506IiwgZXJyb3IpOwogICAgICAgIGFsZXJ0KCLruYTrsIDrsojtmLgg67OA6rK9IOykkSDrrLjsoJzqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiIpOwogICAgICB9Cn0KICB9LAp9Owo="},{"version":3,"sources":["ResetPassword.vue"],"names":[],"mappings":";AAuCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container-center-horizontal\">\n    <div class=\"resetpassword screen\">\n      <Header />\n      <div class=\"resetpassword-wrap\">\n        <h1 class=\"resetpassword-title valign-text-middle pretendard-extra-extra-bold-black-30px\">비밀번호 재설정하기\n        </h1>\n        <div class=\"resetpassword-content\">\n          <div class=\"resetpassword-content-item\">\n            <div class=\"resetpassword-content-item-title pretendard-medium-log-cabin-18px\">비밀번호</div>\n            <input\n              type=\"password\"\n              v-model=\"newPassword\"\n              @input=\"validatePassword\" \n              :maxlength=\"20\"\n              placeholder=\"비밀번호를 입력하세요\"\n              class=\"resetpassword-input-box valign-text-middle pretendard-medium-mountain-mist-16px\"\n            />\n          </div>\n          <div class=\"resetpassword-content-item\">\n            <div class=\"resetpassword-content-item-title pretendard-medium-log-cabin-18px\">비밀번호 확인</div>\n            <input\n              type=\"password\"\n              v-model=\"confirmNewPassword\"\n              placeholder=\"비밀번호를 다시 입력하세요\"\n              class=\"resetpassword-input-box valign-text-middle pretendard-medium-mountain-mist-16px\"\n            />\n          </div>\n          <p v-if=\"errorMessage\" class=\"error-message pretendard-regular-normal-white-12px\">{{ errorMessage }}</p>\n          <button class=\"change-btn pretendard-semi-bold-white-18px\" @click=\"handlePasswordChange\">비밀번호 변경</button>\n        </div>\n      </div>\n      <XFooter />\n      <ResetPasswordConfirmModal v-if=\"isModalVisible\" @close=\"hideModal\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"./Header\";\nimport XFooter from \"./XFooter\";\nimport ResetPasswordConfirmModal from \"./ResetPasswordConfirmModal\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"ResetPassword\",\n  components: {\n    Header,\n    XFooter,\n    ResetPasswordConfirmModal,\n  },\n  data() {\n    return {\n      isModalVisible: false,\n      newPassword: \"\",\n      errorMessage: \"\",\n      confirmNewPassword: \"\",\n      phone: this.$route.params.phone || \"\", \n    };\n  },\n  methods: {\n    validatePassword() {\n      // 최소 8~20자, 연속된 문자를 사용할 수 없음\n      const regex = /^(?!.*[^a-zA-Z0-9])(?!.*(.)\\1{2,}).{8,20}$/;\n      this.pwError = !regex.test(this.newPassword)\n        ? \"비밀번호는 8~20자 이내로 입력해야 하며 연속된 문자와 특수문자를 사용할 수 없습니다.\"\n        : null;\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    hideModal() {\n      this.isModalVisible = false;\n    },\n    async handlePasswordChange() {\n      if (this.newPassword !== this.confirmNewPassword) {\n        this.errorMessage = \"새 비밀번호가 일치하지 않습니다.\";\n        return;\n      }\n\n      try {\n\n        // 서버로 비밀번호 변경 요청\n        const response = await axios.post(\n          \"https://13.124.62.68:3000/api/v1/auth/reset-password\",\n          {\n            phone: this.phone,\n            newPassword: this.newPassword,\n            confirmNewPassword: this.confirmNewPassword,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n\n        // 응답 처리\n        if (response.status === 200) {\n          console.log(\"비밀번호 변경 성공:\", response.data);\n          alert(\"비밀번호가 성공적으로 변경되었습니다.\");\n          this.showModal();\n        } else {\n          alert(\"비밀번호 변경에 실패했습니다.\");\n        }\n      } catch (error) {\n        console.error(\"비밀번호 변경 중 오류 발생:\", error);\n        alert(\"비밀번호 변경 중 문제가 발생했습니다.\");\n      }\n}\n  },\n};\n</script>\n<style scoped>\n.error-message {\n  color: #d30f1a;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding-left: 155px;\n}\n</style>\n<style scoped src=\"@/style/signup/resetpassword.css\" />\n"]}]}