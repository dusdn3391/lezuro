{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/manager/ManagerReservationModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/manager/ManagerReservationModal.vue","mtime":1732082003398},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hbmFnZXJTdG9yZSB9IGZyb20gJ0Avc3RvcmUvbWFuYWdlclN0b3JlJzsgIC8vIEFQSSDtmLjstpwKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6Ik1hbmFnZXJSZXNlcnZhdGlvbk1vZGFsIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVtYmVyUGhvbmUgOiAiIiwKICAgICAgbWVtYmVyQ291bnQgOiAiIiwKICAgICAgbWVtYmVyTmFtZSA6ICIiLAogICAgICBzdGFydFRpbWU6ICIiLAogICAgICBlcnJvck1lc3NhZ2U6ICIiLAogICAgICBlbmRUaW1lOiAiIiwKICAgICAgbWVtbzogIiIsCiAgICAgIGF2YWlsYWJsZVRpbWVzOiBbCiAgICAgICAgICAiMDA6MDAiLCAiMDA6MzAiLCAiMDE6MDAiLCAiMDE6MzAiLCAiMDI6MDAiLCAiMDI6MzAiLCAiMDM6MDAiLCAiMDM6MzAiLAogICAgICAgICAgIjA0OjAwIiwgIjA0OjMwIiwgIjA1OjAwIiwgIjA1OjMwIiwgIjA2OjAwIiwgIjA2OjMwIiwgIjA3OjAwIiwgIjA3OjMwIiwKICAgICAgICAgICIwODowMCIsICIwODozMCIsICIwOTowMCIsICIwOTozMCIsICIxMDowMCIsICIxMDozMCIsICIxMTowMCIsICIxMTozMCIsCiAgICAgICAgICAiMTI6MDAiLCAiMTI6MzAiLCAiMTM6MDAiLCAiMTM6MzAiLCAiMTQ6MDAiLCAiMTQ6MzAiLCAiMTU6MDAiLCAiMTU6MzAiLAogICAgICAgICAgIjE2OjAwIiwgIjE2OjMwIiwgIjE3OjAwIiwgIjE3OjMwIiwgIjE4OjAwIiwgIjE4OjMwIiwgIjE5OjAwIiwgIjE5OjMwIiwKICAgICAgICAgICIyMDowMCIsICIyMDozMCIsICIyMTowMCIsICIyMTozMCIsICIyMjowMCIsICIyMjozMCIsICIyMzowMCIsICIyMzozMCIKICAgICAgICBdLAogICAgfTsKICB9LAogIHByb3BzOnsKICAgIHNlbGVjdGVkUm9vbTogewogICAgICB0eXBlOiBPYmplY3QsIC8vIOyghOuLrOuwm+uKlCDrjbDsnbTthLAg7YOA7J6FIOyEpOyglSAo7JiI7IucOiBTdHJpbmcg65iQ64qUIE51bWJlcikKICAgICAgcmVxdWlyZWQ6IHRydWUsIC8vIO2VhOyImCBwcm9wIOyXrOu2gAogICAgfSwKICAgIHNlbGVjdGVkUmVzZXJ2YXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICB9LAogICAgaXNFZGl0TW9kZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICBzZWxlY3RlZERhdGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwgLy8gc2VsZWN0ZWREYXRl6rCAIO2VhOyImOyehOydhCDrqoXsi5wKICAgIH0sCiAgfSwKICB3YXRjaDogewogIHNlbGVjdGVkRGF0ZShuZXdEYXRlKSB7CiAgICBjb25zb2xlLmxvZygic2VsZWN0ZWREYXRlIOuzgOqyvSDqsJDsp4A6IiwgbmV3RGF0ZSk7CiAgICB0aGlzLmdldFJlc2VydmF0aW9uRHQoKTsKICB9LAp9LAogIG1vdW50ZWQoKSB7CiAgICAvLyBwcm9wc+uhnCDrsJvsnYAg642w7J207YSwIOy2nOugpQogICAgY29uc29sZS5sb2coInNlbGVjdGVkUm9vbSBwcm9wOiIsIHRoaXMuc2VsZWN0ZWRSb29tKTsKICAgIGNvbnNvbGUubG9nKCJzZWxlY3RlZFJlc2VydmF0aW9uIHByb3A6IiwgdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uKTsKICAgIGNvbnNvbGUubG9nKCJpc0VkaXRNb2RlIHByb3A6IiwgdGhpcy5pc0VkaXRNb2RlKTsKICAgIHRoaXMuZ2V0UmVzZXJ2YXRpb25EdCgpOwogICAgLy8g7IiY7KCVIOuqqOuTnOydvCDrlYwg6riw7KG0IOyYiOyVvSDrjbDsnbTthLDrpbwg7J6F66ClIO2VhOuTnOyXkCDssYTsm4AKICAgIGlmICh0aGlzLmlzRWRpdE1vZGUgJiYgdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uKSB7CiAgICAgIGNvbnN0IHJlc2VydmF0aW9uID0gdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uOwogICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHJlc2VydmF0aW9uLnN0YXJ0VGltZS5zbGljZSgwLCAxMCk7CiAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzZXJ2YXRpb24uc3RhcnRUaW1lLnNsaWNlKDExLCAxNik7CiAgICAgIHRoaXMuZW5kVGltZSA9IHJlc2VydmF0aW9uLmVuZFRpbWUuc2xpY2UoMTEsIDE2KTsKICAgICAgdGhpcy5tZW1iZXJOYW1lID0gcmVzZXJ2YXRpb24ucmVzZXJfdXNlciB8fCAiIjsKICAgICAgdGhpcy5tZW1iZXJQaG9uZSA9IHJlc2VydmF0aW9uLnJlc2VyX3Bob25lIHx8ICIiOwogICAgICB0aGlzLm1lbWJlckNvdW50ID0gcmVzZXJ2YXRpb24ubWVtYmVyIHx8ICIiOwogICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUm9vbSkgewogICAgICAvLyDsi6Dqt5wg7JiI7JW9IOuTseuhnSDsi5wKICAgICAgdGhpcy5zdGFydFRpbWUgPSAiIjsKICAgICAgdGhpcy5lbmRUaW1lID0gIiI7CiAgICAgIHRoaXMubWVtYmVyTmFtZSA9ICIiOwogICAgICB0aGlzLm1lbWJlclBob25lID0gIiI7CiAgICAgIHRoaXMubWVtYmVyQ291bnQgPSAiIjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbHRlckF2YWlsYWJsZVRpbWVzKCkgewogICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgIGNvbnN0IGN1cnJlbnRIb3VycyA9IFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgIjAiKTsKICAgIGNvbnN0IGN1cnJlbnRNaW51dGVzID0gU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICIwIik7CiAgICBjb25zdCBjdXJyZW50VGltZVN0cmluZyA9IGAke2N1cnJlbnRIb3Vyc306JHtjdXJyZW50TWludXRlc31gOwoKICAgIGNvbnNvbGUubG9nKCJbRmlsdGVyIExvZ2ljXSDtmITsnqwg7Iuc6rCEOiIsIGN1cnJlbnRUaW1lU3RyaW5nKTsKCiAgICAvLyDtmITsnqwg7Iuc6rCEIOydtO2bhOydmCDsi5zqsITrp4wg64Ko6riw6riwCiAgICByZXR1cm4gdGhpcy5hdmFpbGFibGVUaW1lcy5maWx0ZXIoKHRpbWUpID0+IHRpbWUgPj0gY3VycmVudFRpbWVTdHJpbmcpOwogIH0sCiAgYXN5bmMgZ2V0UmVzZXJ2YXRpb25EdCgpIHsKICB0cnkgewogICAgLy8g7ISg7YOd65CcIOuCoOynnOyZgCDrsKkg66ek64uI7KCAIElEIOqwgOyguOyYpOq4sAogICAgY29uc3QgZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlOwogICAgY29uc3QgbWFuYWdlcklkID0gdGhpcy5zZWxlY3RlZFJvb20/Lm1hbmFnZXJpZDsKCiAgICBjb25zb2xlLmxvZygiW1N0ZXAgMV0gbWFuYWdlcklkIOqwgOyguOyYpOq4sDoiLCBtYW5hZ2VySWQpOwogICAgY29uc29sZS5sb2coIltTdGVwIDJdIOyEoO2DneuQnCDrgqDsp5w6IiwgZGF0ZSk7CgogICAgaWYgKCFtYW5hZ2VySWQpIHsKICAgICAgY29uc29sZS5lcnJvcigiW0Vycm9yXSBtYW5hZ2VySWTqsIAg7JeG7Iq164uI64ukLiIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc29sZS5sb2coYFtTdGVwIDNdIEFQSSDsmpTssq0gVVJMOiByZXNlcnZhdGlvbnMvZGF0ZS8ke2RhdGV9L21hbmFnZXI/bWFuYWdlcklkPSR7bWFuYWdlcklkfWApOwogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYW5hZ2VyU3RvcmUuZ2V0VGFzayhgcmVzZXJ2YXRpb25zL2RhdGUvJHtkYXRlfS9tYW5hZ2VyP21hbmFnZXJJZD0ke21hbmFnZXJJZH1gKTsKCiAgICBjb25zb2xlLmxvZygiW1N0ZXAgNF0gQVBJIOydkeuLtSDrjbDsnbTthLA6IiwgcmVzcG9uc2UpOwoKICAgIC8vIOyYiOyVveuQnCDsi5zqsIQg7KCA7J6lCiAgICB0aGlzLnJlc2VydmVkVGltZXMgPSBbXTsKICAgIHJlc3BvbnNlLmZvckVhY2goKHJvb20pID0+IHsKICAgICAgaWYgKHJvb20ucm9vbV9pZCA9PT0gdGhpcy5zZWxlY3RlZFJvb20ucm9vbV9pZCkgewogICAgICAgIHJvb20ucmVzZXJ2YXRpb25zLmZvckVhY2goKHJlc2VydmF0aW9uKSA9PiB7CiAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShyZXNlcnZhdGlvbi5zdGFydFRpbWUpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE2KTsKICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZShyZXNlcnZhdGlvbi5lbmRUaW1lKS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxNik7CgogICAgICAgICAgY29uc29sZS5sb2coIltTdGVwIDVdIOyYiOyVveuQnCDsi5zqsIQ6Iiwgc3RhcnRUaW1lLCAiLSIsIGVuZFRpbWUpOwoKICAgICAgICAgIGxldCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGAxOTcwLTAxLTAxVCR7c3RhcnRUaW1lfTowMFpgKTsKICAgICAgICAgIGNvbnN0IGVuZFRpbWVPYmogPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke2VuZFRpbWV9OjAwWmApOwoKICAgICAgICAgIHdoaWxlIChjdXJyZW50VGltZSA8IGVuZFRpbWVPYmopIHsKICAgICAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IGN1cnJlbnRUaW1lLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE2KTsKCiAgICAgICAgICAgIC8vIOyYiOyVveuQnCDsi5zqsITsnYQgcmVzZXJ2ZWRUaW1lc+yXkCDstpTqsIAKICAgICAgICAgICAgaWYgKCF0aGlzLnJlc2VydmVkVGltZXMuaW5jbHVkZXModGltZVN0cmluZykpIHsKICAgICAgICAgICAgICB0aGlzLnJlc2VydmVkVGltZXMucHVzaCh0aW1lU3RyaW5nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY3VycmVudFRpbWUuc2V0TWludXRlcyhjdXJyZW50VGltZS5nZXRNaW51dGVzKCkgKyAzMCk7IC8vIDMw67aEIOuLqOychOuhnCDspp3qsIAKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgY29uc29sZS5sb2coIltTdGVwIDZdIOy1nOyihSDsmIjslb3rkJwg7Iuc6rCEIOuqqeuhnToiLCB0aGlzLnJlc2VydmVkVGltZXMpOwoKICAgIC8vIO2YhOyerCDsi5zqsIQg7J207ZuE7J2YIOyLnOqwhOunjCDtlYTthLDrp4EKICAgIGNvbnN0IGZpbHRlcmVkVGltZXMgPSB0aGlzLmZpbHRlckF2YWlsYWJsZVRpbWVzKCk7CgogICAgLy8gaXNFZGl0TW9kZeqwgCB0cnVl7J2066m0IOyImOyglSDspJHsnbgg7JiI7JW9IOyLnOqwhOydhCDtj6ztlagKICAgIGlmICh0aGlzLmlzRWRpdE1vZGUgJiYgdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uKSB7CiAgICAgIGNvbnN0IGVkaXRpbmdTdGFydFRpbWUgPSB0aGlzLnNlbGVjdGVkUmVzZXJ2YXRpb24uc3RhcnRUaW1lLnNsaWNlKDExLCAxNik7CiAgICAgIGNvbnN0IGVkaXRpbmdFbmRUaW1lID0gdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uLmVuZFRpbWUuc2xpY2UoMTEsIDE2KTsKCiAgICAgIGNvbnNvbGUubG9nKCJbU3RlcCA3XSDtmITsnqwg7IiY7KCVIOykkeyduCDsmIjslb0g7Iuc6rCEOiIsIGVkaXRpbmdTdGFydFRpbWUsICItIiwgZWRpdGluZ0VuZFRpbWUpOwoKICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoYDE5NzAtMDEtMDFUJHtlZGl0aW5nU3RhcnRUaW1lfTowMFpgKTsKICAgICAgY29uc3QgZW5kVGltZU9iaiA9IG5ldyBEYXRlKGAxOTcwLTAxLTAxVCR7ZWRpdGluZ0VuZFRpbWV9OjAwWmApOwoKICAgICAgd2hpbGUgKGN1cnJlbnRUaW1lIDwgZW5kVGltZU9iaikgewogICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBjdXJyZW50VGltZS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxNik7CiAgICAgICAgLy8g7IiY7KCVIOykkeyduCDsmIjslb0g7Iuc6rCE7J2AIOustOyhsOqxtCDtj6ztlagKICAgICAgICBpZiAoIWZpbHRlcmVkVGltZXMuaW5jbHVkZXModGltZVN0cmluZykpIHsKICAgICAgICAgIGZpbHRlcmVkVGltZXMucHVzaCh0aW1lU3RyaW5nKTsKICAgICAgICB9CiAgICAgICAgY3VycmVudFRpbWUuc2V0TWludXRlcyhjdXJyZW50VGltZS5nZXRNaW51dGVzKCkgKyAzMCk7CiAgICAgIH0KICAgIH0KCiAgICAvLyByZXNlcnZlZFRpbWVz66W8IOygnOyZuO2VnCBhdmFpbGFibGVUaW1lcyDshKTsoJUKICAgIHRoaXMuYXZhaWxhYmxlVGltZXMgPSBmaWx0ZXJlZFRpbWVzLmZpbHRlcigodGltZSkgPT4gIXRoaXMucmVzZXJ2ZWRUaW1lcy5pbmNsdWRlcyh0aW1lKSB8fCB0aGlzLmlzRWRpdGluZ1RpbWVJbmNsdWRlZCh0aW1lKSk7CgogICAgY29uc29sZS5sb2coIltTdGVwIDhdIOy1nOyihSDsgqzsmqkg6rCA64ql7ZWcIOyLnOqwhCDrqqnroZ06IiwgdGhpcy5hdmFpbGFibGVUaW1lcyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoIltFcnJvcl0g7JiI7JW9IOyLnOqwhCDqsIDsoLjsmKTquLAg7Jik66WYOiIsIGVycm9yKTsKICAgIGFsZXJ0KCLsmIjslb3rkJwg7Iuc6rCE7J2EIOqwgOyguOyYpOuKlCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4iKTsKICB9Cn0sCmlzRWRpdGluZ1RpbWVJbmNsdWRlZCh0aW1lKSB7CiAgaWYgKHRoaXMuaXNFZGl0TW9kZSAmJiB0aGlzLnNlbGVjdGVkUmVzZXJ2YXRpb24pIHsKICAgIGNvbnN0IGVkaXRpbmdTdGFydFRpbWUgPSB0aGlzLnNlbGVjdGVkUmVzZXJ2YXRpb24uc3RhcnRUaW1lLnNsaWNlKDExLCAxNik7CiAgICBjb25zdCBlZGl0aW5nRW5kVGltZSA9IHRoaXMuc2VsZWN0ZWRSZXNlcnZhdGlvbi5lbmRUaW1lLnNsaWNlKDExLCAxNik7CgogICAgY29uc3QgY3VycmVudFRpbWUgPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke3RpbWV9OjAwWmApOwogICAgY29uc3Qgc3RhcnRUaW1lT2JqID0gbmV3IERhdGUoYDE5NzAtMDEtMDFUJHtlZGl0aW5nU3RhcnRUaW1lfTowMFpgKTsKICAgIGNvbnN0IGVuZFRpbWVPYmogPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke2VkaXRpbmdFbmRUaW1lfTowMFpgKTsKCiAgICByZXR1cm4gY3VycmVudFRpbWUgPj0gc3RhcnRUaW1lT2JqICYmIGN1cnJlbnRUaW1lIDwgZW5kVGltZU9iajsKICB9CiAgcmV0dXJuIGZhbHNlOwp9LAoKICBjbG9zZU1vZGFsKCkgewogICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICB9LAogIGFzeW5jIGNvbmZpcm1SZXNlcnZhdGlvbigpIHsKICBjb25zb2xlLmxvZygic2VsZWN0ZWREYXRlOiIsIHRoaXMuc2VsZWN0ZWREYXRlKTsKICBjb25zb2xlLmxvZygic3RhcnRUaW1lOiIsIHRoaXMuc3RhcnRUaW1lLCAiZW5kVGltZToiLCB0aGlzLmVuZFRpbWUpOwoKICBjb25zdCBzdGFydFRpbWUgPSBgJHt0aGlzLnNlbGVjdGVkRGF0ZX1UJHt0aGlzLnN0YXJ0VGltZX06MDAuMDAwWmA7CiAgY29uc3QgZW5kVGltZSA9IGAke3RoaXMuc2VsZWN0ZWREYXRlfVQke3RoaXMuZW5kVGltZX06MDAuMDAwWmA7CgogIGlmICh0aGlzLm1lbWJlclBob25lLmxlbmd0aCAhPT0gMTEpIHsKICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIu2ctOuMgOuyiO2YuCAxMeyekOumrOulvCDsnoXroKXtlbTso7zshLjsmpQiOwogICAgcmV0dXJuOyAvLyDsmpTssq0g7LCo64uoCiAgfQogIHRoaXMuZXJyb3JNZXNzYWdlID0gIiI7CgogIGlmICghdGhpcy5zZWxlY3RlZFJvb20pIHsKICAgIGFsZXJ0KCLrsKkg7KCV67O06rCAIOuIhOudveuQmOyXiOyKteuLiOuLpC4iKTsKICAgIHJldHVybjsKICB9CgogIGNvbnN0IHBhcmFtcyA9IHsKICAgIHJvb21JZDogdGhpcy5zZWxlY3RlZFJvb20ucm9vbV9pZCwKICAgIG1hbmFnZXJpZDogdGhpcy5zZWxlY3RlZFJvb20ubWFuYWdlcmlkLAogICAgc3RhcnRUaW1lLAogICAgZW5kVGltZSwKICAgIHJvb210eXBlOiAiR29sZiIsCiAgICByZXNlcl91c2VyOiB0aGlzLm1lbWJlck5hbWUsCiAgICByZXNlcl9waG9uZTogdGhpcy5tZW1iZXJQaG9uZSwKICAgIG1lbWJlcjogdGhpcy5tZW1iZXJDb3VudCwKICAgIGFncmVlOiB0cnVlCiAgfTsKCiAgdHJ5IHsKICAgIGlmICh0aGlzLmlzRWRpdE1vZGUgJiYgdGhpcy5zZWxlY3RlZFJlc2VydmF0aW9uKSB7CiAgICAgIGNvbnNvbGUubG9nKCLsiJjsoJUg66qo65OcOiDsmIjslb0g7IKt7KCcIO2bhCDsnqzrk7HroZ0iKTsKICAgICAgYXdhaXQgdGhpcy5kZWxldGVSZXNlcnZhdGlvbih0aGlzLnNlbGVjdGVkUmVzZXJ2YXRpb24uaWQpOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1hbmFnZXJTdG9yZS5wb3N0VGFzaygicmVzZXJ2YXRpb25zLzEiLCBwYXJhbXMpOwogICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICBhbGVydCgi7JiI7JW97J20IOyImOygleuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYW5hZ2VyU3RvcmUucG9zdFRhc2soInJlc2VydmF0aW9ucy8xIiwgcGFyYW1zKTsKICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgYWxlcnQoIuyYiOyVveydtCDrk7HroZ3rkJjsl4jsirXri4jri6QuIik7CiAgICAgIH0KICAgIH0KICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoIkFQSSDtmLjstpwg7Jik66WYOiIsIGVycm9yKTsKICAgIGFsZXJ0KCLsmIjslb3sl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLiDshJzrsoQg7Jik66WY66W8IO2ZleyduO2VmOyEuOyalC4iKTsKICB9Cn0sCgovLyDsmIjslb0g7IKt7KCcIOuplOyEnOuTnAphc3luYyBkZWxldGVSZXNlcnZhdGlvbihyZXNlcnZhdGlvbklkKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFuYWdlclN0b3JlLmRlbGV0ZVRhc2soYHJlc2VydmF0aW9ucy8ke3Jlc2VydmF0aW9uSWR9YCk7CiAgICBjb25zb2xlLmxvZygi7JiI7JW9IOyCreygnCDsmYTro4w6IiwgcmVzcG9uc2UpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCLsmIjslb0g7IKt7KCcIOyYpOulmDoiLCBlcnJvcik7CiAgICBhbGVydCgi7JiI7JW9IOyCreygnOyXkCDsi6TtjKjtlojsirXri4jri6QuIik7CiAgICB0aHJvdyBlcnJvcjsgLy8g7IKt7KCcIOyLpO2MqCDsi5wg65Ox66Gd7J2EIOynhO2Wie2VmOyngCDslYrrj4TroZ0g7JiI7Jm466W8IOuNmOynkeuLiOuLpC4KICB9Cn0KCn0KfTsK"},{"version":3,"sources":["ManagerReservationModal.vue"],"names":[],"mappings":";AA0DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"ManagerReservationModal.vue","sourceRoot":"src/components/manager","sourcesContent":["<template>\n  <div class=\"modal-overlay\" @click.self=\"closeModal\">\n    <div class=\"modal-content\">\n      <h2 class=\"pretendard-bold-mine-shaft-18px\">{{ isEditMode && selectedReservation ? '예약 수정' : '예약 등록' }}</h2>\n\n      <div class=\"form-group\">\n        <input type=\"date\" v-model=\"selectedDate\" class=\"date-picker\" />\n      </div>\n\n      <div class=\"form-group time-selectors\">\n        <select v-model=\"startTime\" class=\"time-picker\">\n          <option disabled value=\"\">예약 시작 시간</option>\n          <option v-for=\"time in availableTimes\" :key=\"time\" :value=\"time\">\n            {{ time }}\n          </option>\n        </select>\n\n        <select v-model=\"endTime\" class=\"time-picker\">\n          <option disabled value=\"\">예약 종료 시간</option>\n          <option v-for=\"time in availableTimes\" :key=\"time\" :value=\"time\">\n            {{ time }}\n          </option>\n        </select>\n      </div>\n      \n      <div>\n       \n        <textarea v-model=\"memberCount\" placeholder=\"인원수를 적어주세요\" class=\"memo-input\"></textarea>\n      </div>\n\n      <div>\n        <textarea v-model=\"memberName\" placeholder=\"예약자명을 적어주세요\" class=\"memo-input\"></textarea>\n      </div>\n\n      <div>\n        <textarea v-model=\"memberPhone\" placeholder=\"휴대번호를 적어주세요\" class=\"memo-input\" maxlength=\"11\"></textarea>\n        <span\n      v-if=\"errorMessage\"\n      class=\"error-message pretendard-regular-normal-red-18px\"\n    >\n      {{ errorMessage }}\n    </span>\n      </div>\n\n\n      <!-- <div class=\"form-group\">\n        <textarea v-model=\"memo\" placeholder=\"예약자명 메모를 남겨주세요\" class=\"memo-input\"></textarea>\n      </div> -->\n\n      <div class=\"form-group buttons\">\n        <button class=\"cancel-btn\" @click=\"closeModal\">취소하기</button>\n        <button class=\"confirm-btn\" @click=\"confirmReservation\">{{ isEditMode ? '수정하기' : '확인하기' }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { managerStore } from '@/store/managerStore';  // API 호출\n\nexport default {\n    name:\"ManagerReservationModal\",\n  data() {\n    return {\n      memberPhone : \"\",\n      memberCount : \"\",\n      memberName : \"\",\n      startTime: \"\",\n      errorMessage: \"\",\n      endTime: \"\",\n      memo: \"\",\n      availableTimes: [\n          \"00:00\", \"00:30\", \"01:00\", \"01:30\", \"02:00\", \"02:30\", \"03:00\", \"03:30\",\n          \"04:00\", \"04:30\", \"05:00\", \"05:30\", \"06:00\", \"06:30\", \"07:00\", \"07:30\",\n          \"08:00\", \"08:30\", \"09:00\", \"09:30\", \"10:00\", \"10:30\", \"11:00\", \"11:30\",\n          \"12:00\", \"12:30\", \"13:00\", \"13:30\", \"14:00\", \"14:30\", \"15:00\", \"15:30\",\n          \"16:00\", \"16:30\", \"17:00\", \"17:30\", \"18:00\", \"18:30\", \"19:00\", \"19:30\",\n          \"20:00\", \"20:30\", \"21:00\", \"21:30\", \"22:00\", \"22:30\", \"23:00\", \"23:30\"\n        ],\n    };\n  },\n  props:{\n    selectedRoom: {\n      type: Object, // 전달받는 데이터 타입 설정 (예시: String 또는 Number)\n      required: true, // 필수 prop 여부\n    },\n    selectedReservation: {\n      type: Object,\n      required: false,\n    },\n    isEditMode: {\n      type: Boolean,\n      default: false,\n    },\n    selectedDate: {\n      type: String,\n      required: true, // selectedDate가 필수임을 명시\n    },\n  },\n  watch: {\n  selectedDate(newDate) {\n    console.log(\"selectedDate 변경 감지:\", newDate);\n    this.getReservationDt();\n  },\n},\n  mounted() {\n    // props로 받은 데이터 출력\n    console.log(\"selectedRoom prop:\", this.selectedRoom);\n    console.log(\"selectedReservation prop:\", this.selectedReservation);\n    console.log(\"isEditMode prop:\", this.isEditMode);\n    this.getReservationDt();\n    // 수정 모드일 때 기존 예약 데이터를 입력 필드에 채움\n    if (this.isEditMode && this.selectedReservation) {\n      const reservation = this.selectedReservation;\n      this.selectedDate = reservation.startTime.slice(0, 10);\n      this.startTime = reservation.startTime.slice(11, 16);\n      this.endTime = reservation.endTime.slice(11, 16);\n      this.memberName = reservation.reser_user || \"\";\n      this.memberPhone = reservation.reser_phone || \"\";\n      this.memberCount = reservation.member || \"\";\n    } else if (this.selectedRoom) {\n      // 신규 예약 등록 시\n      this.startTime = \"\";\n      this.endTime = \"\";\n      this.memberName = \"\";\n      this.memberPhone = \"\";\n      this.memberCount = \"\";\n    }\n  },\n  methods: {\n    filterAvailableTimes() {\n    const now = new Date();\n    const currentHours = String(now.getHours()).padStart(2, \"0\");\n    const currentMinutes = String(now.getMinutes()).padStart(2, \"0\");\n    const currentTimeString = `${currentHours}:${currentMinutes}`;\n\n    console.log(\"[Filter Logic] 현재 시간:\", currentTimeString);\n\n    // 현재 시간 이후의 시간만 남기기\n    return this.availableTimes.filter((time) => time >= currentTimeString);\n  },\n  async getReservationDt() {\n  try {\n    // 선택된 날짜와 방 매니저 ID 가져오기\n    const date = this.selectedDate;\n    const managerId = this.selectedRoom?.managerid;\n\n    console.log(\"[Step 1] managerId 가져오기:\", managerId);\n    console.log(\"[Step 2] 선택된 날짜:\", date);\n\n    if (!managerId) {\n      console.error(\"[Error] managerId가 없습니다.\");\n      return;\n    }\n\n    console.log(`[Step 3] API 요청 URL: reservations/date/${date}/manager?managerId=${managerId}`);\n    const response = await managerStore.getTask(`reservations/date/${date}/manager?managerId=${managerId}`);\n\n    console.log(\"[Step 4] API 응답 데이터:\", response);\n\n    // 예약된 시간 저장\n    this.reservedTimes = [];\n    response.forEach((room) => {\n      if (room.room_id === this.selectedRoom.room_id) {\n        room.reservations.forEach((reservation) => {\n          const startTime = new Date(reservation.startTime).toISOString().slice(11, 16);\n          const endTime = new Date(reservation.endTime).toISOString().slice(11, 16);\n\n          console.log(\"[Step 5] 예약된 시간:\", startTime, \"-\", endTime);\n\n          let currentTime = new Date(`1970-01-01T${startTime}:00Z`);\n          const endTimeObj = new Date(`1970-01-01T${endTime}:00Z`);\n\n          while (currentTime < endTimeObj) {\n            const timeString = currentTime.toISOString().slice(11, 16);\n\n            // 예약된 시간을 reservedTimes에 추가\n            if (!this.reservedTimes.includes(timeString)) {\n              this.reservedTimes.push(timeString);\n            }\n\n            currentTime.setMinutes(currentTime.getMinutes() + 30); // 30분 단위로 증가\n          }\n        });\n      }\n    });\n\n    console.log(\"[Step 6] 최종 예약된 시간 목록:\", this.reservedTimes);\n\n    // 현재 시간 이후의 시간만 필터링\n    const filteredTimes = this.filterAvailableTimes();\n\n    // isEditMode가 true이면 수정 중인 예약 시간을 포함\n    if (this.isEditMode && this.selectedReservation) {\n      const editingStartTime = this.selectedReservation.startTime.slice(11, 16);\n      const editingEndTime = this.selectedReservation.endTime.slice(11, 16);\n\n      console.log(\"[Step 7] 현재 수정 중인 예약 시간:\", editingStartTime, \"-\", editingEndTime);\n\n      let currentTime = new Date(`1970-01-01T${editingStartTime}:00Z`);\n      const endTimeObj = new Date(`1970-01-01T${editingEndTime}:00Z`);\n\n      while (currentTime < endTimeObj) {\n        const timeString = currentTime.toISOString().slice(11, 16);\n        // 수정 중인 예약 시간은 무조건 포함\n        if (!filteredTimes.includes(timeString)) {\n          filteredTimes.push(timeString);\n        }\n        currentTime.setMinutes(currentTime.getMinutes() + 30);\n      }\n    }\n\n    // reservedTimes를 제외한 availableTimes 설정\n    this.availableTimes = filteredTimes.filter((time) => !this.reservedTimes.includes(time) || this.isEditingTimeIncluded(time));\n\n    console.log(\"[Step 8] 최종 사용 가능한 시간 목록:\", this.availableTimes);\n  } catch (error) {\n    console.error(\"[Error] 예약 시간 가져오기 오류:\", error);\n    alert(\"예약된 시간을 가져오는 중 오류가 발생했습니다.\");\n  }\n},\nisEditingTimeIncluded(time) {\n  if (this.isEditMode && this.selectedReservation) {\n    const editingStartTime = this.selectedReservation.startTime.slice(11, 16);\n    const editingEndTime = this.selectedReservation.endTime.slice(11, 16);\n\n    const currentTime = new Date(`1970-01-01T${time}:00Z`);\n    const startTimeObj = new Date(`1970-01-01T${editingStartTime}:00Z`);\n    const endTimeObj = new Date(`1970-01-01T${editingEndTime}:00Z`);\n\n    return currentTime >= startTimeObj && currentTime < endTimeObj;\n  }\n  return false;\n},\n\n  closeModal() {\n    this.$emit(\"close\");\n  },\n  async confirmReservation() {\n  console.log(\"selectedDate:\", this.selectedDate);\n  console.log(\"startTime:\", this.startTime, \"endTime:\", this.endTime);\n\n  const startTime = `${this.selectedDate}T${this.startTime}:00.000Z`;\n  const endTime = `${this.selectedDate}T${this.endTime}:00.000Z`;\n\n  if (this.memberPhone.length !== 11) {\n    this.errorMessage = \"휴대번호 11자리를 입력해주세요\";\n    return; // 요청 차단\n  }\n  this.errorMessage = \"\";\n\n  if (!this.selectedRoom) {\n    alert(\"방 정보가 누락되었습니다.\");\n    return;\n  }\n\n  const params = {\n    roomId: this.selectedRoom.room_id,\n    managerid: this.selectedRoom.managerid,\n    startTime,\n    endTime,\n    roomtype: \"Golf\",\n    reser_user: this.memberName,\n    reser_phone: this.memberPhone,\n    member: this.memberCount,\n    agree: true\n  };\n\n  try {\n    if (this.isEditMode && this.selectedReservation) {\n      console.log(\"수정 모드: 예약 삭제 후 재등록\");\n      await this.deleteReservation(this.selectedReservation.id);\n      const response = await managerStore.postTask(\"reservations/1\", params);\n      if (response) {\n        alert(\"예약이 수정되었습니다.\");\n      }\n    } else {\n      const response = await managerStore.postTask(\"reservations/1\", params);\n      if (response) {\n        alert(\"예약이 등록되었습니다.\");\n      }\n    }\n    this.$emit(\"close\");\n  } catch (error) {\n    console.error(\"API 호출 오류:\", error);\n    alert(\"예약에 실패했습니다. 서버 오류를 확인하세요.\");\n  }\n},\n\n// 예약 삭제 메서드\nasync deleteReservation(reservationId) {\n  try {\n    const response = await managerStore.deleteTask(`reservations/${reservationId}`);\n    console.log(\"예약 삭제 완료:\", response);\n  } catch (error) {\n    console.error(\"예약 삭제 오류:\", error);\n    alert(\"예약 삭제에 실패했습니다.\");\n    throw error; // 삭제 실패 시 등록을 진행하지 않도록 예외를 던집니다.\n  }\n}\n\n}\n};\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: #fff;\n  width: 880px;\n  padding: 40px;\n  border-radius: 10px;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.date-picker {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.time-selectors {\n  display: flex;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n.time-picker {\n  width: 48%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.memo-input {\n  width: 100%;\n  /* height:230px; */\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  resize: none;\n  padding-top:20px; \n}\n\n.buttons {\n  display: flex;\n  justify-content: space-between;\n}\n\n.cancel-btn,\n.confirm-btn {\n  width: 48%;\n  padding: 15px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background-color: #ccc;\n  color: #fff;\n}\n\n.confirm-btn {\n  background-color: #003399;\n  color: #fff;\n}\n\n.error-message {\n  color: red;\n  font-size: 14px;\n  margin-top: 5px;\n}\n</style>\n"]}]}