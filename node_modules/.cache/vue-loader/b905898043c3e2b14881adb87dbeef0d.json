{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue","mtime":1733971396941},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBZG1pbkhlYWRlciBmcm9tICIuL0FkbWluSGVhZGVyLnZ1ZSI7CmltcG9ydCBBZG1pbk5hdmJhciBmcm9tICIuL0FkbWluTmF2YmFyLnZ1ZSI7CmltcG9ydCB7IGFkbWluU3RvcmUgfSBmcm9tICJAL3N0b3JlL2FkbWluU3RvcmUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZG1pblRlcm1zV3JpdGUiLAogIGNvbXBvbmVudHM6IHsKICAgIEFkbWluSGVhZGVyLAogICAgQWRtaW5OYXZiYXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRDYXRlZ29yeTogIiIsIC8vIOyVveq0gCDsooXrpZgg7ISg7YOdCiAgICAgIHRlcm1zOiBbCiAgICAgICAgeyB0aXRsZTogIuygnCAxIOyhsCIsIGNvbnRlbnQ6ICIiLCB0eXBlOiAiIiB9LCAvLyDstIjquLAg642w7J207YSwCiAgICAgIF0sCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIGlkOiBudWxsLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDrnbzsmrDthLAgcGFyYW1z7JeQ7IScIOuNsOydtO2EsOulvCDrsJvslYTsmLQKICAgIGNvbnN0IHsgaWQsIHRpdGxlLCBjb250ZW50LCBpc0VkaXQsIHR5cGUgfSA9IHRoaXMuJHJvdXRlLnBhcmFtczsKCiAgICBpZiAoaXNFZGl0KSB7CiAgICAgIC8vIOyImOyglSDrqqjrk5zsnbwg6rK97JqwIOuNsOydtO2EsOulvCDstIjquLDtmZQKICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSA9IHR5cGU7CiAgICAgIHRoaXMudGVybXMgPSBbeyB0aXRsZSwgY29udGVudCwgdHlwZTogIiIgfV07CiAgICAgIGNvbnNvbGUubG9nKCLsiJjsoJXtlaAg642w7J207YSwOiIsIHsgaWQsIHRpdGxlLCBjb250ZW50LCB0eXBlIH0pOwogICAgfSBlbHNlIHsKICAgICAgLy8g7IOIIOuNsOydtO2EsCDstpTqsIAg7IucIOy0iOq4sO2ZlAogICAgICB0aGlzLnRlcm1zID0gW3sgdGl0bGU6ICLsoJwgMSDsobAiLCBjb250ZW50OiAiIiwgdHlwZTogIiIgfV07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDsg4gg7KGw7ZWtIOy2lOqwgAogICAgYWRkQXJ0aWNsZSgpIHsKICAgICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy50ZXJtcy5sZW5ndGggKyAxOwogICAgICB0aGlzLnRlcm1zLnB1c2goewogICAgICAgIHRpdGxlOiBg7KCcICR7bmV4dEluZGV4fSDsobBgLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIHR5cGU6IHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSwKICAgICAgfSk7CiAgICB9LAogICAgYmFja0xpc3QoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9hZG1pbnRlcm1zLWxpc3QiIH0pCiAgICB9LAogICAgLy8g7JW96rSAIOyiheulmCDsl4XrjbDsnbTtirgKICAgIHVwZGF0ZVRlcm1zVHlwZSgpIHsKICAgICAgdGhpcy50ZXJtcy5mb3JFYWNoKCh0ZXJtKSA9PiB7CiAgICAgICAgdGVybS50eXBlID0gdGhpcy5zZWxlY3RlZENhdGVnb3J5OwogICAgICB9KTsKICAgIH0sCiAgICAvLyDrjbDsnbTthLAg7KCA7J6lCiAgICBhc3luYyBzdWJtaXQoKSB7CiAgICAgIGlmICghdGhpcy5zZWxlY3RlZENhdGVnb3J5KSB7CiAgICAgICAgYWxlcnQoIuyVveq0gCDsooXrpZjrpbwg7ISg7YOd7ZW07KO87IS47JqULiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudGVybXMuc29tZSgodGVybSkgPT4gIXRlcm0udGl0bGUgfHwgIXRlcm0uY29udGVudCkpIHsKICAgICAgICBhbGVydCgi66qo65OgIOygnOuqqeqzvCDrgrTsmqnsnYQg7J6F66Cl7ZW07KO87IS47JqULiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICB0ZXJtczogdGhpcy50ZXJtcywKICAgICAgICB9OwoKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFkbWluU3RvcmUucG9zdFRhc2soInRlcm1zL3Rlcm0iLCBwYXJhbXMpOwoKICAgICAgICBjb25zb2xlLmxvZygi65Ox66GdIOyEseqztToiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBhbGVydCgi65Ox66Gd7J20IOuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvYWRtaW50ZXJtcy1saXN0IiB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCLrk7HroZ0g7Iuk7YyoOiIsIGVycm9yKTsKICAgICAgICBhbGVydCgi65Ox66Gd7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4iKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHVwZGF0ZVRlcm1zKCkgewogICAgICB0cnkgewogICAgICAgIC8vIOyEnOuyhOyXkCDsoITshqHtlaAg642w7J207YSwIOykgOu5hAogICAgICAgIGNvbnN0IHsgdGl0bGUsIGNvbnRlbnQgfSA9IHRoaXMudGVybXNbMF07IC8vIHRlcm1zIOuwsOyXtOydmCDssqsg67KI7Ke4IO2VreuqqeunjCDsoITshqEKICAgICAgICBjb25zb2xlLmxvZygi7IiY7KCVIOyalOyyrSB0aXRsZToiLCB0aXRsZSk7CiAgICAgICAgY29uc29sZS5sb2coIuyImOyglSDsmpTssq0gY29udGVudDoiLCBjb250ZW50KTsKICAgICAgICBjb25zb2xlLmxvZygi7IiY7KCVIOyalOyyrSBJRDoiLCB0aGlzLmlkKTsKCiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgdGl0bGUsCiAgICAgICAgICBjb250ZW50LAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coIuyImOyglSDsoIQiLCBwYXJhbXMpCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pblN0b3JlLnVwZGF0ZVRhc2soYHRlcm1zLyR7dGhpcy5pZH1gLCBwYXJhbXMpOwogICAgICAgIGNvbnNvbGUubG9nKCLsiJjsoJUg7ZuEIiwgcGFyYW1zKQogICAgICAgIC8vIGNvbnNvbGUubG9nKCLsiJjsoJUg7ISx6rO1OiIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGFsZXJ0KCLsnbTsmqnslb3qtIDsnbQg7IiY7KCV65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9hZG1pbnRlcm1zLWxpc3QiIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuydtOyaqeyVveq0gCDsiJjsoJUg7Iuk7YyoOiIsIGVycm9yKTsKICAgICAgICBhbGVydCgi7J207Jqp7JW96rSAIOyImOygleyXkCDsi6TtjKjtlojsirXri4jri6QuIik7CiAgICAgIH0KICAgIH0KCgogIH0sCn07Cg=="},{"version":3,"sources":["AdminTermsWrite.vue"],"names":[],"mappings":";AAyDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"AdminTermsWrite.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"all\">\n    <AdminHeader />\n    <div class=\"wrap\">\n      <div class=\"reservation-container\">\n        <AdminNavbar />\n        <div class=\"wrapper\">\n          <div class=\"title-top pretendard-bold-log-cabin-38px\"> {{ isEdit ? \"이용약관 수정\" : \"이용약관 작성\" }}</div>\n          <div class=\"content-wrap\">\n            <div class=\"write-wrap\">\n              <div class=\"title-box\">\n                <div class=\"content-title valign-text-middle pretendard-medium-black-18px\">\n                  약관 종류\n                </div>\n                <select name=\"category\" id=\"category\" v-model=\"selectedCategory\"\n                  class=\"category-select pretendard-regular-normal-mine-shaft-16px\" @change=\"updateTermsType\">\n                  <option value=\"\" disabled selected>\n                    약관 종류를 선택해주세요\n                  </option>\n                  <option value=\"이용약관\">이용약관</option>\n                  <option value=\"개인정보\">개인정보처리방침</option>\n                  <option value=\"위치정보\">위치정보이용약관</option>\n                </select>\n              </div>\n              <div v-for=\"(article, index) in terms\" :key=\"index\" class=\"article-box\">\n                <!-- 제목 -->\n                <div class=\"title-box\">\n                  <input type=\"text\" class=\"frame-7281-8 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 제목을 입력해주세요`\" v-model=\"article.title\" />\n                </div>\n                <!-- 내용 -->\n                <div class=\"content-box\">\n                  <textarea class=\"frame-7281-9 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 내용을 입력해주세요`\" v-model=\"article.content\"></textarea>\n                </div>\n              </div>\n              <div class=\"button-container\">\n                <button class=\"cancel-button pretendard-medium-white-18px\" @click=\"backList\">\n                  취소하기\n                </button>\n                <!-- 24.12.12 수정 - 수정하기에서 버튼 없애기 -->\n                <button  v-if=\"!isEdit\" class=\"add-button pretendard-medium-white-18px\" @click=\"addArticle\">\n                  추가하기\n                </button>\n                <button class=\"submit-button pretendard-medium-white-18px\" @click=\"isEdit ? updateTerms() : submit()\">\n                  {{ isEdit ? \"수정하기\" : \"등록하기\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminHeader from \"./AdminHeader.vue\";\nimport AdminNavbar from \"./AdminNavbar.vue\";\nimport { adminStore } from \"@/store/adminStore\";\n\nexport default {\n  name: \"AdminTermsWrite\",\n  components: {\n    AdminHeader,\n    AdminNavbar,\n  },\n  data() {\n    return {\n      selectedCategory: \"\", // 약관 종류 선택\n      terms: [\n        { title: \"제 1 조\", content: \"\", type: \"\" }, // 초기 데이터\n      ],\n      isEdit: false,\n      id: null,\n    };\n  },\n  mounted() {\n    // 라우터 params에서 데이터를 받아옴\n    const { id, title, content, isEdit, type } = this.$route.params;\n\n    if (isEdit) {\n      // 수정 모드일 경우 데이터를 초기화\n      this.isEdit = true;\n      this.id = id;\n      this.selectedCategory = type;\n      this.terms = [{ title, content, type: \"\" }];\n      console.log(\"수정할 데이터:\", { id, title, content, type });\n    } else {\n      // 새 데이터 추가 시 초기화\n      this.terms = [{ title: \"제 1 조\", content: \"\", type: \"\" }];\n    }\n  },\n  methods: {\n    // 새 조항 추가\n    addArticle() {\n      const nextIndex = this.terms.length + 1;\n      this.terms.push({\n        title: `제 ${nextIndex} 조`,\n        content: \"\",\n        type: this.selectedCategory,\n      });\n    },\n    backList() {\n      this.$router.push({ path: \"/adminterms-list\" })\n    },\n    // 약관 종류 업데이트\n    updateTermsType() {\n      this.terms.forEach((term) => {\n        term.type = this.selectedCategory;\n      });\n    },\n    // 데이터 저장\n    async submit() {\n      if (!this.selectedCategory) {\n        alert(\"약관 종류를 선택해주세요.\");\n        return;\n      }\n\n      if (this.terms.some((term) => !term.title || !term.content)) {\n        alert(\"모든 제목과 내용을 입력해주세요.\");\n        return;\n      }\n\n      try {\n        const params = {\n          terms: this.terms,\n        };\n\n        const response = await adminStore.postTask(\"terms/term\", params);\n\n        console.log(\"등록 성공:\", response.data);\n        alert(\"등록이 되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"등록 실패:\", error);\n        alert(\"등록에 실패했습니다.\");\n      }\n    },\n    async updateTerms() {\n      try {\n        // 서버에 전송할 데이터 준비\n        const { title, content } = this.terms[0]; // terms 배열의 첫 번째 항목만 전송\n        console.log(\"수정 요청 title:\", title);\n        console.log(\"수정 요청 content:\", content);\n        console.log(\"수정 요청 ID:\", this.id);\n\n        const params = {\n          title,\n          content,\n        };\n        console.log(\"수정 전\", params)\n        const response = await adminStore.updateTask(`terms/${this.id}`, params);\n        console.log(\"수정 후\", params)\n        // console.log(\"수정 성공:\", response.data);\n        alert(\"이용약관이 수정되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"이용약관 수정 실패:\", error);\n        alert(\"이용약관 수정에 실패했습니다.\");\n      }\n    }\n\n\n  },\n};\n</script>\n<style scoped>\n.reservation-container {\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  background: #f5f6f6;\n}\n\n.title-top {\n  background-color: #fff;\n  padding: 30px;\n  margin-bottom: 20px;\n  /* 24.12.10 수정 - 추가 */\n  font-size: 28px;\n}\n\n.wrapper {\n  flex-grow: 1;\n  padding: 30px;\n  gap: 20px;\n}\n\n.article-box {\n  margin-bottom: 20px;\n}\n\n.title-box {\n  margin-bottom: 10px;\n}\n\n.content-box {\n  margin-bottom: 20px;\n}\n\n.button-container {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n\n.add-button,\n.cancel-button,\n.submit-button {\n  width: 200px;\n  padding: 15px;\n  border: none;\n  cursor: pointer;\n}\n\n/* 24.12.10 수정 - 추가 */\n.cancel-button {\n  background-color: #999;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.add-button {\n  background-color: #d30f1a;\n  color: white;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.submit-button {\n  background-color: #184199;\n  color: white;\n}\n\n.frame-7281-8 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  border: 0.5px solid #ddd;\n}\n\n.frame-7281-9 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  height: 100px;\n  border: 0.5px solid #ddd;\n  resize: none;\n}\n\n.write-wrap {\n  background-color: #fff;\n  padding: 30px;\n}\n\n.category-select {\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n}\n</style>\n"]}]}