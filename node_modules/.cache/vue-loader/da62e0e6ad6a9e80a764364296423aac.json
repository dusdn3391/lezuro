{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/ResetPassword.vue?vue&type=style&index=0&id=07978c30&prod&scoped=true&lang=css","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/ResetPassword.vue","mtime":1734329655183},{"path":"/usr/vue/lezuro_all/node_modules/css-loader/dist/cjs.js","mtime":1728542747276},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1728542748492},{"path":"/usr/vue/lezuro_all/node_modules/postcss-loader/src/index.js","mtime":1728542747992},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lcnJvci1tZXNzYWdlIHsKICBjb2xvcjogI2QzMGYxYTsKICBmb250LXNpemU6IDEycHg7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmctbGVmdDogMTU1cHg7Cn0K"},{"version":3,"sources":["ResetPassword.vue"],"names":[],"mappings":";AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container-center-horizontal\">\n    <div class=\"resetpassword screen\">\n      <Header />\n      <div class=\"resetpassword-wrap\">\n        <h1 class=\"resetpassword-title valign-text-middle pretendard-extra-extra-bold-black-30px\">비밀번호 재설정하기\n        </h1>\n        <div class=\"resetpassword-content\">\n          <div class=\"resetpassword-content-item\">\n            <div class=\"resetpassword-content-item-title pretendard-medium-log-cabin-18px\">비밀번호</div>\n            <input\n              type=\"password\"\n              v-model=\"newPassword\"\n              @input=\"validatePassword\" \n              :maxlength=\"20\"\n              placeholder=\"비밀번호를 입력하세요\"\n              class=\"resetpassword-input-box valign-text-middle pretendard-medium-mountain-mist-16px\"\n            />\n          </div>\n          <div class=\"resetpassword-content-item\">\n            <div class=\"resetpassword-content-item-title pretendard-medium-log-cabin-18px\">비밀번호 확인</div>\n            <input\n              type=\"password\"\n              v-model=\"confirmNewPassword\"\n              placeholder=\"비밀번호를 다시 입력하세요\"\n              class=\"resetpassword-input-box valign-text-middle pretendard-medium-mountain-mist-16px\"\n            />\n          </div>\n          <p v-if=\"errorMessage\" class=\"error-message pretendard-regular-normal-white-12px\">{{ errorMessage }}</p>\n          <button class=\"change-btn pretendard-semi-bold-white-18px\" @click=\"handlePasswordChange\">비밀번호 변경</button>\n        </div>\n      </div>\n      <XFooter />\n      <ResetPasswordConfirmModal v-if=\"isModalVisible\" @close=\"hideModal\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"./Header\";\nimport XFooter from \"./XFooter\";\nimport ResetPasswordConfirmModal from \"./ResetPasswordConfirmModal\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"ResetPassword\",\n  components: {\n    Header,\n    XFooter,\n    ResetPasswordConfirmModal,\n  },\n  data() {\n    return {\n      isModalVisible: false,\n      newPassword: \"\",\n      errorMessage: \"\",\n      confirmNewPassword: \"\",\n      phone: this.$route.params.phone || \"\", \n    };\n  },\n  methods: {\n    validatePassword() {\n      // 최소 8~20자, 연속된 문자를 사용할 수 없음\n      const regex = /^(?!.*[^a-zA-Z0-9])(?!.*(.)\\1{2,}).{8,20}$/;\n      this.pwError = !regex.test(this.newPassword)\n        ? \"비밀번호는 8~20자 이내로 입력해야 하며 연속된 문자와 특수문자를 사용할 수 없습니다.\"\n        : null;\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    hideModal() {\n      this.isModalVisible = false;\n    },\n    async handlePasswordChange() {\n      if (this.newPassword !== this.confirmNewPassword) {\n        this.errorMessage = \"새 비밀번호가 일치하지 않습니다.\";\n        return;\n      }\n\n      try {\n\n        // 서버로 비밀번호 변경 요청\n        const response = await axios.post(\n          \"http://13.124.62.68:3000/api/v1/auth/reset-password\",\n          {\n            phone: this.phone,\n            newPassword: this.newPassword,\n            confirmNewPassword: this.confirmNewPassword,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n\n        // 응답 처리\n        if (response.status === 200) {\n          console.log(\"비밀번호 변경 성공:\", response.data);\n          alert(\"비밀번호가 성공적으로 변경되었습니다.\");\n          this.showModal();\n        } else {\n          alert(\"비밀번호 변경에 실패했습니다.\");\n        }\n      } catch (error) {\n        console.error(\"비밀번호 변경 중 오류 발생:\", error);\n        alert(\"비밀번호 변경 중 문제가 발생했습니다.\");\n      }\n}\n  },\n};\n</script>\n<style scoped>\n.error-message {\n  color: #d30f1a;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding-left: 155px;\n}\n</style>\n<style scoped src=\"@/style/signup/resetpassword.css\" />\n"]}]}