{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/ReservationCancelModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/ReservationCancelModal.vue","mtime":1733968697055},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/babel-loader/lib/index.js","mtime":1728543112262},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHRhc2tTdG9yZSB9IGZyb20gIkAvc3RvcmUvdGFza1N0b3JlIjsgCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlc2VydmF0aW9uQ2FuY2VsTW9kYWwiLAogIHByb3BzOiB7CiAgICByZXNlcnZhdGlvbklkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgc3RvcmU6IHsKICAgIHR5cGU6IFN0cmluZywKICAgIHJlcXVpcmVkOiB0cnVlLAogIH0sCiAgdGltZTogewogICAgdHlwZTogU3RyaW5nLAogICAgcmVxdWlyZWQ6IHRydWUsCiAgfSwKICBsb2dpbkluZm86IHsKICAgIHR5cGU6IE9iamVjdCwKICAgIHJlcXVpcmVkOiB0cnVlLAogIH0sCiAgfSwKICAvLyBtb3VudGVkKCkgewogIC8vICAgY29uc29sZS5sb2coIuuwm+ydgCByZXNlcnZhdGlvbklkIChtb3VudGVkKToiLCB0aGlzLnJlc2VydmF0aW9uSWQpOwogIC8vIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VSTW9kYWwoKSB7CiAgICAgIC8vIOuqqOuLrOydhCDri6vquLAg7JyE7ZWcIOydtOuypO2KuCDsoITshqEKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VSTW9kYWwiKTsKICAgIH0sCiAgICBhc3luYyBjYW5jZWxSZXNlcnZhdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBzdGF0dXM6ICJjYW5jZWwiLCAvLyDshJzrsoTsl5Ag7KCA7J6l7ZWgIO2VhOuTnOuqhSAncHJvZmlsZUltYWdlJ+uhnCDsoITshqEKICAgICAgICB9OwogICAgICAgIC8vIOyEnOuyhOyXkCDtlITroZztlYQg7J2066+47KeAIOyXheuNsOydtO2KuCDsmpTssq0KICAgICAgICBjb25zdCByZXNwb25zZSA9IHRhc2tTdG9yZS51cGRhdGVUYXNrKAogICAgICAgICAgYHJlc2VydmF0aW9ucy8ke3RoaXMucmVzZXJ2YXRpb25JZH0vc3RhdHVzYCwKICAgICAgICAgIHBhcmFtcwogICAgICAgICk7CiAgICAgICAgY29uc29sZS5sb2coImRzZmhkZnNqa2w7ZHNmIixwYXJhbXMpCiAgICAgICAgY29uc29sZS5sb2coIuyYiOyVvSDst6jshowg7J2R64u1OiIsIHJlc3BvbnNlKTsKICAgICAgICBhbGVydCgi7JiI7JW97J20IOy3qOyGjOuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgICB0aGlzLmNhbmNlbE1zZygpIC8vIOyYiOyVvSDst6jshowg66mU7IS47KeAIOyghOyGoQoKICAgICAgICAvLyDshLHqs7XsoIHsnLzroZwg7Leo7IaMIO2bhCDrqqjri6wg64ur6riwCiAgICAgICAgdGhpcy4kZW1pdCgiY2xvc2VSTW9kYWwiKTsKICAgICAgICB0aGlzLiRlbWl0KCJyZXNlcnZhdGlvbkNhbmNlbGVkIik7IC8vIOyDgeychCDsu7Ttj6zrhIztirjsl5Ag7J2067Kk7Yq4IOyghOuLrAogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuyYiOyVvSDst6jshowg7Iuk7YyoOiIsIGVycm9yKTsKICAgICAgICBhbGVydCgi7JiI7JW9IOy3qOyGjOyXkCDsi6TtjKjtlojsirXri4jri6QuIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuIik7CiAgICAgIH0KICAgIH0sCgogICAgLy8g7JiI7JW9IOy3qOyGjCDrqZTshLjsp4Ag7KCE7IahCiAgICBhc3luYyBjYW5jZWxNc2coKXsKICAgICAgY29uc3QgYXZhaWxhYmxlVGltZSA9IHRoaXMudGltZS5zcGxpdCgiWyIpWzBdLnRyaW0oKTsKICAgICAgY29uc3QgcGFyYW1zID0KICAgICAgewogICAgICAgIC8vIO2VtOuLuSDtjIzrnbzrr7jthLAg6rCSIOyxhOybjCDrhKPquLAhCiAgICAgICAgcGhvbmVOdW1iZXI6IHRoaXMubG9naW5JbmZvLnBob25lTm0sIC8vIGxvZ2luSW5mb+yXkOyEnCBwaG9uZU5tIOyCrOyaqQogICAgICAgIHVzZXJOYW1lOiB0aGlzLmxvZ2luSW5mby5uYW1lLCAgIAogICAgICAgIGF2YWlsYWJsZVRpbWUsIC8vIOyYiOyVvSDsi5zsnpEg7Iuc6rCE6rO8IOyiheujjCDsi5zqsIQKICAgIHN0b3JlTmFtZTogdGhpcy5zdG9yZSwgICAKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coImRrbGoiLHBhcmFtcykKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRhc2tTdG9yZS5wb3N0VGFzaygKICAgICAgICAgIGB2MS9zbXMvY2FuY2VsUmVzZXJ2YXRpb25gLHBhcmFtcwogICAgICAgICk7CiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlIixyZXNwb25zZSkKICAgICAgICAKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJBUEkg7Zi47LacIOyYpOulmDoiLCBlcnJvcik7CiAgICAgIH0KICAgICAgCiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["ReservationCancelModal.vue"],"names":[],"mappings":";AA0BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"ReservationCancelModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"popupu47defualt-3 screen\">\n    <div class=\"frame-5-3\">\n      <div class=\"frame-4-3\">\n        <div class=\"x-45 valign-text-middle notosanskr-medium-log-cabin-16px\">\n          예약 취소\n        </div>\n        <!-- 24.12.12 수정 - 폰트 수정, 문구 수정 -->\n        <p class=\"text_label-33 valign-text-middle pretendard-regular-normal-granite-gray-14px\">\n          예약을 취소하시겠습니까?\n        </p>\n      </div>\n      <div class=\"btn-group-3\">\n        <!-- 24.12.12 수정 - div - button 변경 -->\n        <button class=\"btnsecondary notosanskr-light-white-16px\" @click=\"closeRModal\">\n            닫기\n        </button>\n        <button class=\"btnprimary-3 notosanskr-light-white-16px\" @click=\"cancelReservation\">\n            취소\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { taskStore } from \"@/store/taskStore\"; \n\nexport default {\n  name: \"ReservationCancelModal\",\n  props: {\n    reservationId: {\n      type: Number,\n      required: true,\n    },\n    store: {\n    type: String,\n    required: true,\n  },\n  time: {\n    type: String,\n    required: true,\n  },\n  loginInfo: {\n    type: Object,\n    required: true,\n  },\n  },\n  // mounted() {\n  //   console.log(\"받은 reservationId (mounted):\", this.reservationId);\n  // },\n  methods: {\n    closeRModal() {\n      // 모달을 닫기 위한 이벤트 전송\n      this.$emit(\"closeRModal\");\n    },\n    async cancelReservation() {\n      try {\n        const params = {\n          status: \"cancel\", // 서버에 저장할 필드명 'profileImage'로 전송\n        };\n        // 서버에 프로필 이미지 업데이트 요청\n        const response = taskStore.updateTask(\n          `reservations/${this.reservationId}/status`,\n          params\n        );\n        console.log(\"dsfhdfsjkl;dsf\",params)\n        console.log(\"예약 취소 응답:\", response);\n        alert(\"예약이 취소되었습니다.\");\n        this.cancelMsg() // 예약 취소 메세지 전송\n\n        // 성공적으로 취소 후 모달 닫기\n        this.$emit(\"closeRModal\");\n        this.$emit(\"reservationCanceled\"); // 상위 컴포넌트에 이벤트 전달\n      } catch (error) {\n        console.error(\"예약 취소 실패:\", error);\n        alert(\"예약 취소에 실패했습니다. 다시 시도해주세요.\");\n      }\n    },\n\n    // 예약 취소 메세지 전송\n    async cancelMsg(){\n      const availableTime = this.time.split(\"[\")[0].trim();\n      const params =\n      {\n        // 해당 파라미터 값 채워 넣기!\n        phoneNumber: this.loginInfo.phoneNm, // loginInfo에서 phoneNm 사용\n        userName: this.loginInfo.name,   \n        availableTime, // 예약 시작 시간과 종료 시간\n    storeName: this.store,   \n      };\n      console.log(\"dklj\",params)\n      try {\n        const response = await taskStore.postTask(\n          `v1/sms/cancelReservation`,params\n        );\n        console.log(\"response\",response)\n        \n      } catch (error) {\n        console.error(\"API 호출 오류:\", error);\n      }\n      \n    }\n  },\n};\n</script>\n<style>\n/* 24.12.12 수정 */\n.popupu47defualt-3 {\n  align-items: center;\n  background-color: var(--blackwhitewhite);\n  border: 1px solid #dadada;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  padding: 20px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n/* 24.12.12 수정 */\n.frame-5-3 {\n  width: 14.9%;\n  align-items: center;\n  background-color: var(--blackwhitewhite);\n  display: inline-flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 8px;\n  position: relative;\n}\n\n/* 24.12.12 수정 */\n.frame-4-3 {\n  align-items: center;\n  display: inline-flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  gap: 10px;\n  padding: 24px 25px;\n}\n\n/* .x-45{\n  letter-spacing: -0.32px;\n  line-height: 24px;\n  margin-top: -1px;\n  position: relative;\n  text-align: center;\n  white-space: nowrap;\n  width: fit-content;\n}\n\n.text_label-33,\n.text_label-34 {\n  letter-spacing: -0.28px;\n  line-height: 21px;\n  position: relative;\n  text-align: center;\n  width: 226px;\n} */\n\n/* 24.12.12 수정 */\n.btn-group-3 {\n  /* align-items: flex-start;\n  display: inline-flex;\n  flex: 0 0 auto;\n  overflow: hidden;\n  position: relative; */\n  width: 100%;\n}\n\n/* 24.12.12 수정 - 추가 */\n.btnsecondary, .btnprimary-3 {\n  width: 50%;\n  height: 50px;\n  border: none;\n}\n\n/* 24.12.12 수정 */\n.btnsecondary {\n  background-color: var(--nobel);\n  border-bottom-left-radius: 8px;\n}\n\n/* 24.12.12 수정 */\n.btnprimary-3 {\n  \n  background-color: var(--monza);\n  border-bottom-right-radius: 8px;\n}\n\n</style>"]}]}