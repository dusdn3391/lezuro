{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue?vue&type=style&index=0&id=1dcf6d07&scoped=true&lang=css","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue","mtime":1733971396941},{"path":"/usr/vue/lezuro_all/node_modules/css-loader/dist/cjs.js","mtime":1728542747276},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1728542748492},{"path":"/usr/vue/lezuro_all/node_modules/postcss-loader/src/index.js","mtime":1728542747992},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZXNlcnZhdGlvbi1jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgaGVpZ2h0OiAxMDAlOwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgYmFja2dyb3VuZDogI2Y1ZjZmNjsKfQoKLnRpdGxlLXRvcCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBwYWRkaW5nOiAzMHB4OwogIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgLyogMjQuMTIuMTAg7IiY7KCVIC0g7LaU6rCAICovCiAgZm9udC1zaXplOiAyOHB4Owp9Cgoud3JhcHBlciB7CiAgZmxleC1ncm93OiAxOwogIHBhZGRpbmc6IDMwcHg7CiAgZ2FwOiAyMHB4Owp9CgouYXJ0aWNsZS1ib3ggewogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi50aXRsZS1ib3ggewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KCi5jb250ZW50LWJveCB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmJ1dHRvbi1jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZ2FwOiAxMHB4Owp9CgouYWRkLWJ1dHRvbiwKLmNhbmNlbC1idXR0b24sCi5zdWJtaXQtYnV0dG9uIHsKICB3aWR0aDogMjAwcHg7CiAgcGFkZGluZzogMTVweDsKICBib3JkZXI6IG5vbmU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgovKiAyNC4xMi4xMCDsiJjsoJUgLSDstpTqsIAgKi8KLmNhbmNlbC1idXR0b24gewogIGJhY2tncm91bmQtY29sb3I6ICM5OTk7Cn0KCi8qIDI0LjEyLjEyIOyImOyglSAtIOuwsOqyveyDiSDrs4Dqsr0gKi8KLmFkZC1idXR0b24gewogIGJhY2tncm91bmQtY29sb3I6ICNkMzBmMWE7CiAgY29sb3I6IHdoaXRlOwp9CgovKiAyNC4xMi4xMiDsiJjsoJUgLSDrsLDqsr3sg4kg67OA6rK9ICovCi5zdWJtaXQtYnV0dG9uIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTg0MTk5OwogIGNvbG9yOiB3aGl0ZTsKfQoKLmZyYW1lLTcyODEtOCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKICBwYWRkaW5nOiAyMHB4OwogIHdpZHRoOiAxMDAlOwogIGJvcmRlcjogMC41cHggc29saWQgI2RkZDsKfQoKLmZyYW1lLTcyODEtOSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKICBwYWRkaW5nOiAyMHB4OwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwcHg7CiAgYm9yZGVyOiAwLjVweCBzb2xpZCAjZGRkOwogIHJlc2l6ZTogbm9uZTsKfQoKLndyaXRlLXdyYXAgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgcGFkZGluZzogMzBweDsKfQoKLmNhdGVnb3J5LXNlbGVjdCB7CiAgd2lkdGg6IDEwMCU7CiAgcGFkZGluZzogMTBweDsKICBtYXJnaW4tdG9wOiAxMHB4Owp9Cg=="},{"version":3,"sources":["AdminTermsWrite.vue"],"names":[],"mappings":";AAwKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"AdminTermsWrite.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"all\">\n    <AdminHeader />\n    <div class=\"wrap\">\n      <div class=\"reservation-container\">\n        <AdminNavbar />\n        <div class=\"wrapper\">\n          <div class=\"title-top pretendard-bold-log-cabin-38px\"> {{ isEdit ? \"이용약관 수정\" : \"이용약관 작성\" }}</div>\n          <div class=\"content-wrap\">\n            <div class=\"write-wrap\">\n              <div class=\"title-box\">\n                <div class=\"content-title valign-text-middle pretendard-medium-black-18px\">\n                  약관 종류\n                </div>\n                <select name=\"category\" id=\"category\" v-model=\"selectedCategory\"\n                  class=\"category-select pretendard-regular-normal-mine-shaft-16px\" @change=\"updateTermsType\">\n                  <option value=\"\" disabled selected>\n                    약관 종류를 선택해주세요\n                  </option>\n                  <option value=\"이용약관\">이용약관</option>\n                  <option value=\"개인정보\">개인정보처리방침</option>\n                  <option value=\"위치정보\">위치정보이용약관</option>\n                </select>\n              </div>\n              <div v-for=\"(article, index) in terms\" :key=\"index\" class=\"article-box\">\n                <!-- 제목 -->\n                <div class=\"title-box\">\n                  <input type=\"text\" class=\"frame-7281-8 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 제목을 입력해주세요`\" v-model=\"article.title\" />\n                </div>\n                <!-- 내용 -->\n                <div class=\"content-box\">\n                  <textarea class=\"frame-7281-9 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 내용을 입력해주세요`\" v-model=\"article.content\"></textarea>\n                </div>\n              </div>\n              <div class=\"button-container\">\n                <button class=\"cancel-button pretendard-medium-white-18px\" @click=\"backList\">\n                  취소하기\n                </button>\n                <!-- 24.12.12 수정 - 수정하기에서 버튼 없애기 -->\n                <button  v-if=\"!isEdit\" class=\"add-button pretendard-medium-white-18px\" @click=\"addArticle\">\n                  추가하기\n                </button>\n                <button class=\"submit-button pretendard-medium-white-18px\" @click=\"isEdit ? updateTerms() : submit()\">\n                  {{ isEdit ? \"수정하기\" : \"등록하기\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminHeader from \"./AdminHeader.vue\";\nimport AdminNavbar from \"./AdminNavbar.vue\";\nimport { adminStore } from \"@/store/adminStore\";\n\nexport default {\n  name: \"AdminTermsWrite\",\n  components: {\n    AdminHeader,\n    AdminNavbar,\n  },\n  data() {\n    return {\n      selectedCategory: \"\", // 약관 종류 선택\n      terms: [\n        { title: \"제 1 조\", content: \"\", type: \"\" }, // 초기 데이터\n      ],\n      isEdit: false,\n      id: null,\n    };\n  },\n  mounted() {\n    // 라우터 params에서 데이터를 받아옴\n    const { id, title, content, isEdit, type } = this.$route.params;\n\n    if (isEdit) {\n      // 수정 모드일 경우 데이터를 초기화\n      this.isEdit = true;\n      this.id = id;\n      this.selectedCategory = type;\n      this.terms = [{ title, content, type: \"\" }];\n      console.log(\"수정할 데이터:\", { id, title, content, type });\n    } else {\n      // 새 데이터 추가 시 초기화\n      this.terms = [{ title: \"제 1 조\", content: \"\", type: \"\" }];\n    }\n  },\n  methods: {\n    // 새 조항 추가\n    addArticle() {\n      const nextIndex = this.terms.length + 1;\n      this.terms.push({\n        title: `제 ${nextIndex} 조`,\n        content: \"\",\n        type: this.selectedCategory,\n      });\n    },\n    backList() {\n      this.$router.push({ path: \"/adminterms-list\" })\n    },\n    // 약관 종류 업데이트\n    updateTermsType() {\n      this.terms.forEach((term) => {\n        term.type = this.selectedCategory;\n      });\n    },\n    // 데이터 저장\n    async submit() {\n      if (!this.selectedCategory) {\n        alert(\"약관 종류를 선택해주세요.\");\n        return;\n      }\n\n      if (this.terms.some((term) => !term.title || !term.content)) {\n        alert(\"모든 제목과 내용을 입력해주세요.\");\n        return;\n      }\n\n      try {\n        const params = {\n          terms: this.terms,\n        };\n\n        const response = await adminStore.postTask(\"terms/term\", params);\n\n        console.log(\"등록 성공:\", response.data);\n        alert(\"등록이 되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"등록 실패:\", error);\n        alert(\"등록에 실패했습니다.\");\n      }\n    },\n    async updateTerms() {\n      try {\n        // 서버에 전송할 데이터 준비\n        const { title, content } = this.terms[0]; // terms 배열의 첫 번째 항목만 전송\n        console.log(\"수정 요청 title:\", title);\n        console.log(\"수정 요청 content:\", content);\n        console.log(\"수정 요청 ID:\", this.id);\n\n        const params = {\n          title,\n          content,\n        };\n        console.log(\"수정 전\", params)\n        const response = await adminStore.updateTask(`terms/${this.id}`, params);\n        console.log(\"수정 후\", params)\n        // console.log(\"수정 성공:\", response.data);\n        alert(\"이용약관이 수정되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"이용약관 수정 실패:\", error);\n        alert(\"이용약관 수정에 실패했습니다.\");\n      }\n    }\n\n\n  },\n};\n</script>\n<style scoped>\n.reservation-container {\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  background: #f5f6f6;\n}\n\n.title-top {\n  background-color: #fff;\n  padding: 30px;\n  margin-bottom: 20px;\n  /* 24.12.10 수정 - 추가 */\n  font-size: 28px;\n}\n\n.wrapper {\n  flex-grow: 1;\n  padding: 30px;\n  gap: 20px;\n}\n\n.article-box {\n  margin-bottom: 20px;\n}\n\n.title-box {\n  margin-bottom: 10px;\n}\n\n.content-box {\n  margin-bottom: 20px;\n}\n\n.button-container {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n\n.add-button,\n.cancel-button,\n.submit-button {\n  width: 200px;\n  padding: 15px;\n  border: none;\n  cursor: pointer;\n}\n\n/* 24.12.10 수정 - 추가 */\n.cancel-button {\n  background-color: #999;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.add-button {\n  background-color: #d30f1a;\n  color: white;\n}\n\n/* 24.12.12 수정 - 배경색 변경 */\n.submit-button {\n  background-color: #184199;\n  color: white;\n}\n\n.frame-7281-8 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  border: 0.5px solid #ddd;\n}\n\n.frame-7281-9 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  height: 100px;\n  border: 0.5px solid #ddd;\n  resize: none;\n}\n\n.write-wrap {\n  background-color: #fff;\n  padding: 30px;\n}\n\n.category-select {\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n}\n</style>\n"]}]}