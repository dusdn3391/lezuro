{"remainingRequest":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue?vue&type=style&index=0&id=3bedee7f&prod&scoped=true&lang=css","dependencies":[{"path":"/usr/vue/lezuro_all/src/components/admin/AdminTermsWrite.vue","mtime":1732700008096},{"path":"/usr/vue/lezuro_all/node_modules/css-loader/dist/cjs.js","mtime":1728542747276},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1728542748492},{"path":"/usr/vue/lezuro_all/node_modules/postcss-loader/src/index.js","mtime":1728542747992},{"path":"/usr/vue/lezuro_all/node_modules/cache-loader/dist/cjs.js","mtime":1728542746732},{"path":"/usr/vue/lezuro_all/node_modules/vue-loader/lib/index.js","mtime":1728542748492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZXNlcnZhdGlvbi1jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgaGVpZ2h0OiAxMDAlOwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgYmFja2dyb3VuZDogI2Y1ZjZmNjsKfQoudGl0bGUtdG9wIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIHBhZGRpbmc6IDMwcHg7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoud3JhcHBlciB7CiAgZmxleC1ncm93OiAxOwogIHBhZGRpbmc6IDMwcHg7CiAgZ2FwOiAyMHB4Owp9Ci5hcnRpY2xlLWJveCB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoudGl0bGUtYm94IHsKICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9Ci5jb250ZW50LWJveCB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQouYnV0dG9uLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBnYXA6IDEwcHg7Cn0KLmFkZC1idXR0b24sCi5jYW5jZWwtYnV0dG9uLAouc3VibWl0LWJ1dHRvbiB7CiAgd2lkdGg6IDIwMHB4OwogIHBhZGRpbmc6IDE1cHg7CiAgYm9yZGVyOiBub25lOwogIGN1cnNvcjogcG9pbnRlcjsKfQouYWRkLWJ1dHRvbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzE4NDE5OTsKICBjb2xvcjogd2hpdGU7Cn0KLnN1Ym1pdC1idXR0b24gewogIGJhY2tncm91bmQtY29sb3I6ICNkMzBmMWE7CiAgY29sb3I6IHdoaXRlOwp9Ci5mcmFtZS03MjgxLTggewogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgcGFkZGluZzogMjBweDsKICB3aWR0aDogMTAwJTsKICBib3JkZXI6IDAuNXB4IHNvbGlkICNkZGQ7Cn0KLmZyYW1lLTcyODEtOSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKICBwYWRkaW5nOiAyMHB4OwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwcHg7CiAgYm9yZGVyOiAwLjVweCBzb2xpZCAjZGRkOwogIHJlc2l6ZTogbm9uZTsKfQoud3JpdGUtd3JhcCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBwYWRkaW5nOiAzMHB4Owp9Ci5jYXRlZ29yeS1zZWxlY3QgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDEwcHg7CiAgbWFyZ2luLXRvcDogMTBweDsKfQo="},{"version":3,"sources":["AdminTermsWrite.vue"],"names":[],"mappings":";AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminTermsWrite.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"all\">\n    <AdminHeader />\n    <div class=\"wrap\">\n      <div class=\"reservation-container\">\n        <AdminNavbar />\n        <div class=\"wrapper\">\n          <div class=\"title-top pretendard-bold-log-cabin-38px\"> {{ isEdit ? \"이용약관 수정\" : \"이용약관 작성\" }}</div>\n          <div class=\"content-wrap\">\n            <div class=\"write-wrap\">\n              <div class=\"title-box\">\n                <div\n                  class=\"content-title valign-text-middle pretendard-medium-black-18px\"\n                >\n                  약관 종류\n                </div>\n                <select\n                  name=\"category\"\n                  id=\"category\"\n                  v-model=\"selectedCategory\"\n                  class=\"category-select pretendard-regular-normal-mine-shaft-16px\"\n                  @change=\"updateTermsType\"\n                >\n                  <option value=\"\" disabled selected>\n                    약관 종류를 선택해주세요\n                  </option>\n                  <option value=\"이용약관\">이용약관</option>\n                  <option value=\"개인정보\">개인정보처리방침</option>\n                  <option value=\"위치정보\">위치정보이용약관</option>\n                </select>\n              </div>\n              <div\n                v-for=\"(article, index) in terms\"\n                :key=\"index\"\n                class=\"article-box\"\n              >\n                <!-- 제목 -->\n                <div class=\"title-box\">\n                  <input\n                    type=\"text\"\n                    class=\"frame-7281-8 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 제목을 입력해주세요`\"\n                    v-model=\"article.title\"\n                  />\n                </div>\n                <!-- 내용 -->\n                <div class=\"content-box\">\n                  <textarea\n                    class=\"frame-7281-9 pretendard-regular-normal-mine-shaft-16px\"\n                    :placeholder=\"`제 ${index + 1} 조 내용을 입력해주세요`\"\n                    v-model=\"article.content\"\n                  ></textarea>\n                </div>\n              </div>\n              <div class=\"button-container\">\n                <button class=\"cancel-button pretendard-medium-white-18px\"\n                @click=\"backList\">\n                    취소하기\n                </button>\n                <button\n                  class=\"add-button pretendard-medium-white-18px\"\n                  @click=\"addArticle\"\n                >\n                  추가하기\n                </button>\n                <button\n                  class=\"submit-button pretendard-medium-white-18px\"\n               @click=\"isEdit ? updateTerms() : submit()\"\n                >\n                {{ isEdit ? \"수정하기\" : \"등록하기\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminHeader from \"./AdminHeader.vue\";\nimport AdminNavbar from \"./AdminNavbar.vue\";\nimport { adminStore } from \"@/store/adminStore\";\n\nexport default {\n  name: \"AdminTermsWrite\",\n  components: {\n    AdminHeader,\n    AdminNavbar,\n  },\n  data() {\n    return {\n      selectedCategory: \"\", // 약관 종류 선택\n      terms: [\n        { title: \"제 1 조\", content: \"\", type: \"\" }, // 초기 데이터\n      ],\n      isEdit: false,\n      id: null,\n    };\n  },\n  mounted() {\n    // 라우터 params에서 데이터를 받아옴\n    const { id, title, content, isEdit,type } = this.$route.params;\n\n    if (isEdit) {\n      // 수정 모드일 경우 데이터를 초기화\n      this.isEdit = true;\n      this.id = id; \n      this.selectedCategory = type; \n      this.terms = [{ title, content, type: \"\" }];\n      console.log(\"수정할 데이터:\", { id, title, content, type });\n    } else {\n      // 새 데이터 추가 시 초기화\n      this.terms = [{ title: \"제 1 조\", content: \"\", type: \"\" }];\n    }\n  },\n  methods: {\n    // 새 조항 추가\n    addArticle() {\n      const nextIndex = this.terms.length + 1;\n      this.terms.push({\n        title: `제 ${nextIndex} 조`,\n        content: \"\",\n        type: this.selectedCategory,\n      });\n    },\n    backList(){\n        this.$router.push({path:\"/adminterms-list\"})\n    },\n    // 약관 종류 업데이트\n    updateTermsType() {\n      this.terms.forEach((term) => {\n        term.type = this.selectedCategory;\n      });\n    },\n    // 데이터 저장\n    async submit() {\n      if (!this.selectedCategory) {\n        alert(\"약관 종류를 선택해주세요.\");\n        return;\n      }\n\n      if (this.terms.some((term) => !term.title || !term.content)) {\n        alert(\"모든 제목과 내용을 입력해주세요.\");\n        return;\n      }\n\n      try {\n        const params = {\n          terms: this.terms,\n        };\n\n        const response = await adminStore.postTask(\"terms/term\", params);\n\n        console.log(\"등록 성공:\", response.data);\n        alert(\"등록이 되었습니다.\");\n        this.$router.push({ path: \"/adminterms-list\" });\n      } catch (error) {\n        console.error(\"등록 실패:\", error);\n        alert(\"등록에 실패했습니다.\");\n      }\n    },\n    async updateTerms() {\n  try {\n    // 서버에 전송할 데이터 준비\n    const { title, content } = this.terms[0]; // terms 배열의 첫 번째 항목만 전송\n    console.log(\"수정 요청 title:\", title);\n    console.log(\"수정 요청 content:\", content);\n    console.log(\"수정 요청 ID:\", this.id);\n\n    const params = {\n      title,\n      content,\n    };\n   console.log(\"sddfsdfs\",params)\n    const response = await adminStore.updateTask(`terms/${this.id}`, params);\n    console.log(\"13123123123\",params)\n    console.log(\"수정 성공:\", response.data);\n    alert(\"이용약관이 수정되었습니다.\");\n    this.$router.push({ path: \"/adminterms-list\" });\n  } catch (error) {\n    console.error(\"이용약관 수정 실패:\", error);\n    alert(\"이용약관 수정에 실패했습니다.\");\n  }\n}\n\n\n  },\n};\n</script>\n<style scoped>\n.reservation-container {\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  background: #f5f6f6;\n}\n.title-top {\n  background-color: #fff;\n  padding: 30px;\n  margin-bottom: 20px;\n}\n.wrapper {\n  flex-grow: 1;\n  padding: 30px;\n  gap: 20px;\n}\n.article-box {\n  margin-bottom: 20px;\n}\n.title-box {\n  margin-bottom: 10px;\n}\n.content-box {\n  margin-bottom: 20px;\n}\n.button-container {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n.add-button,\n.cancel-button,\n.submit-button {\n  width: 200px;\n  padding: 15px;\n  border: none;\n  cursor: pointer;\n}\n.add-button {\n  background-color: #184199;\n  color: white;\n}\n.submit-button {\n  background-color: #d30f1a;\n  color: white;\n}\n.frame-7281-8 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  border: 0.5px solid #ddd;\n}\n.frame-7281-9 {\n  background-color: #fafafa;\n  padding: 20px;\n  width: 100%;\n  height: 100px;\n  border: 0.5px solid #ddd;\n  resize: none;\n}\n.write-wrap {\n  background-color: #fff;\n  padding: 30px;\n}\n.category-select {\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n}\n</style>\n"]}]}